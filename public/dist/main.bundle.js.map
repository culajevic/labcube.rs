{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/flatpickr/dist/flatpickr.js","webpack:///./node_modules/flatpickr/dist/l10n/sr.js","webpack:///./src/scripts/class.js","webpack:///./src/scripts/functions.js","webpack:///./src/scripts/price.js","webpack:///./src/scripts/script.js","webpack:///./src/scss/style.scss"],"names":["module","exports","grandParent","parentElement","parentClass","titleElement","titleClass","titleText","inputClass","inputPlaceholder","inputName","inputPattern","newParentElement","document","createElement","className","elementTitle","elementTitleText","createTextNode","appendChild","removeField","removeFieldIcon","newInputField","placeholder","name","pattern","querySelector","focus","elementName","elementToBeRemoved","querySelectorAll","forEach","item","addEventListener","e","parentNode","remove","removeElement","element1","element2","preventDefault","itemToRemove","target","innerText","index","indexOf","splice","children","length","deleteDocument","selector","message","url","redirect","error","confirm","id","getAttribute","fetch","method","then","response","json","data","console","log","window","location","href","alert","renderAnalysisResult","analysis","prices","resultDiv","itemsArray","analysisPositionArr","findIndex","i","tr","tdName","analysisName","analysisLink","setAttribute","slug","previewIcon","preview","alt","altName","y","join","tdGroupName","groupName","hospital","hospitalIcon","availableHC","minmaxPrice","priceSpan","priceRange","minPrice","maxPrice","addAnalysisBtnTd","addAnalysisBtn","addAnalysisBtnText","disabled","_id","iconPath","displayBasket","classList","basketTitle","cardHeader","getElementById","analysisAdded","groupImage","logo","split","urlSlug","removeSpan","removeImg","selectedAnalysis","items","insertBefore","childNodes","removeAnalysis","checkout","analysisBasket","contains","selectedAnalysisBasket","indexOfAnalysisName","localStorageItems","JSON","parse","localStorage","getItem","nameIndex","stringify","removedValue","setItem","innerHTML","add","enableButton","textContent","addAnalysis","tagName","push","sort","a","b","searchLabAnalysis","searchString","filter","checked","filterValue","value","keyCode","setTimeout","searchLab","searchStr","loaderWrapper","banner","now","Date","day","getDay","date","getDate","month","getMonth","year","getFullYear","today","passIds","result","style","opacity","labTemplate","flag","labName","address","placeId","place","municipality","phone","workingHours","monday","opens","closes","tuesday","wednesday","thursday","friday","saturday","sunday","currentDay","currentDayNum","radnoVreme","todayIs","privateInsurance","accredited","labDetailsBtn","open24h","openTime","closingTime","todayOpenTime","todayClosingTime","nowTimeStamp","getTime","closingSoon","closingIn","Math","ceil","createPrice","queryResultUl","liItem","link","labSelected","srcElement","attributes","searchAnalysis","getAnalyisisNameDiv","analysisParentDiv","priceParent","analysisFound","hiddenId","type","analysisRow","analysisNewDiv","analysisPrice","deletePrice","price","deleteButton","buttonText","require","flatpickr","Serbian","sr","NewElement","PriceList","helper","$","ready","tooltip","placement","delay","show","hide","boundary","tooltipClass","maxDate","setDate","datePicker1","dateFormat","altInput","altFormat","enableTime","time_24hr","minDate","allowInput","datePicker2","on","imageSrc","attr","toggleClass","fileName","val","pop","siblings","addClass","html","hover","find","scroll","height","scrollTop","removeClass","animate","pathname","urlArr","checkUrl","group","match","checkCMSAdd","checkCMSAll","findUserByEmail","onload","mainSearch","analysisRadio","activeBtns","showPriceBtn","mapArea","scrollTo","top","behavior","municipalityValue","options","selectedIndex","markers","lat","lab","coordinates","lng","iconImage","total","workinghours","zoom","disableDefaultUI","zoomControl","mapTypeControl","scaleControl","streetViewControl","rotateControl","fullscreenControl","fullscreenControlOptions","position","google","maps","ControlPosition","RIGHT_BOTTOM","styles","map","Map","setCenter","addMarker","marker","Marker","icon","labelOrigin","x","scaledSize","Size","label","text","toString","fontWeight","fontSize","color","infoWindow","InfoWindow","maxWidth","content","addListener","placeMarker","open","event","close","urlParams","URLSearchParams","search","myValue","get","myFilter","history","replaceState","innerSearch","radioFilter","mapFrame","searchstring","status","mainSearchinner","analysisRadioinner","labLocationUrl","uzorakLab","uzorakPatronaza","dateLab","datePatronaza","uzimanjeUzorka","toggle","innerPageSearch","resultTable","numOfAnalysis","schedule","totalPriceSpan","resultSection","totalPrice","parseInt","labIdName","labId","scheduleString","alreadySelectedArray","alreadySelected","idAnalysis","results","abbr","cenovnik","cena","groupID","additionalResult","removeAnalysisLabPage","toBeDeleted","deleteAnalysis","previousElementSibling","numAnalysis","scheduleBtn","headers","body","visina","tezina","bmi","toFixed","searchUserEmail","labDashTable","user","username","mobile","email","scheduledFor","analiza","scrollspy","offset","analysisBtn","disableAddBtn","mondayOpens","mondayCloses","workingWeek","deleteWH","searchPlaces","city","minicipality","postalCode","placeName","resultList","addNewPhone","newPhone","addElement","summernote","styleTags","title","tag","toolbar","addNewAbbr","addNewAlt","addNewConnectedAnalysis","addNewConnectedDiseases","newAbbr","newAlt","groupId","resultGroup","groupNamesList","itemGroup","connectedAnalysis","relatedAnalysisParent","parentUl","analysisSelected","liitems","analysisNameList","includes","connectedAnalysisID","connAnalysisName","connectedAnalysisLi","connectedAnalysisInnerText","connectedDiseases","getDiseasesDiv","diseasesParent","diseaseParentUl","diseaseSelected","diseaseItems","diseaseName","addDisease","diseaseID","diseaseLi","diseaseInnerText","searchReference","referenceList","referenceParentDiv","referenceUl","selectedReferences","referenceItems","referenceName","referenceTitle","addReference","referenceID","removeButton","referenceLi","searchEditor","editorsList","editorParentDiv","editorDiv","selectedEditor","editors","picture","editorName","firstName","lastName","addEditor","editorID","inputEditorName","inputEditorImage","editorh4","editorImage","editorDisplayName","removeEditor","firstChild","newPriceList"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;AACA,IAAI,KAA4D;AAChE,IAAI,SACuD;AAC3D,CAAC,qBAAqB;;AAEtB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oDAAoD,OAAO;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qDAAqD,QAAQ;AAC7D,4CAA4C,QAAQ;AACpD,4DAA4D,QAAQ;AACpE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC,YAAY;AAC5C;AACA;AACA,+BAA+B,gCAAgC;AAC/D;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD,gEAAgE,yEAAyE;AACzI;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,sCAAsC,iDAAiD,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,kCAAkC,0BAA0B,EAAE;AAC9D;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,EAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,EAAE;AACnB;AACA;AACA;AACA,4BAA4B,2BAA2B,EAAE;AACzD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA,4BAA4B,6BAA6B,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,oCAAoC,+CAA+C,EAAE;AACrF;AACA;AACA;AACA,SAAS;AACT;AACA,4BAA4B,+BAA+B,EAAE;AAC7D;AACA,4BAA4B,8BAA8B,EAAE;AAC5D;AACA;AACA,SAAS;AACT;AACA,4BAA4B,mCAAmC,EAAE;AACjE;AACA,4BAA4B,4BAA4B,EAAE;AAC1D;AACA,4BAA4B,2DAA2D,EAAE;AACzF;AACA,4BAA4B,+BAA+B,EAAE;AAC7D;AACA,4BAA4B,uBAAuB,EAAE;AACrD;AACA;AACA;AACA,SAAS;AACT;AACA,4BAA4B,iCAAiC,EAAE;AAC/D;AACA,4BAA4B,4BAA4B,EAAE;AAC1D;AACA,4BAA4B,0BAA0B,EAAE;AACxD;AACA,4BAA4B,uBAAuB,EAAE;AACrD;AACA,4BAA4B,sBAAsB,EAAE;AACpD;AACA,4BAA4B,gDAAgD,EAAE;AAC9E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,mBAAmB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,oCAAoC,EAAE;AACtG;AACA;AACA,2CAA2C,oBAAoB;AAC/D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA,2CAA2C,uCAAuC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,2BAA2B;AACtE,wCAAwC,uBAAuB;AAC/D;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B,mBAAmB,OAAO;AAC1B,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA,oDAAoD,4CAA4C,EAAE;AAClG;AACA,sDAAsD,0CAA0C,EAAE;AAClG;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,gBAAgB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,gBAAgB;AAC9E;AACA;AACA;AACA,mEAAmE,0DAA0D,EAAE;AAC/H;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM;AACzB,mBAAmB,OAAO;AAC1B,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,eAAe;AACnD;AACA;AACA;AACA,wCAAwC,eAAe;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,eAAe;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,oEAAoE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,4BAA4B;AAC9C;AACA;AACA;AACA,+BAA+B,0BAA0B;AACzD;AACA;AACA;AACA,8CAA8C;AAC9C,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,4BAA4B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,2DAA2D,iBAAiB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,KAAK;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kCAAkC,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,kCAAkC,kCAAkC,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,KAAK;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,KAAK;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,iBAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2BAA2B;AAC3E,uCAAuC,kBAAkB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,KAAK;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,iBAAiB;AACvD,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,kBAAkB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,UAAU,EAAE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,kBAAkB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,4BAA4B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,OAAO;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,yCAAyC;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,kCAAkC,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,qBAAqB,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,iDAAiD;AAClG;AACA;AACA;AACA;AACA,kCAAkC,4BAA4B,EAAE;AAChE;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,kCAAkC,6BAA6B,EAAE;AACjE;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,6BAA6B,EAAE;AACjE;AACA,aAAa;AACb;AACA,kCAAkC,6BAA6B,EAAE;AACjE;AACA,aAAa;AACb,oDAAoD;AACpD;AACA,cAAc;AACd;AACA,kCAAkC,6BAA6B,EAAE;AACjE;AACA,aAAa;AACb;AACA,kCAAkC,6BAA6B,EAAE;AACjE;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA,0CAA0C,wCAAwC,EAAE;AACpF;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gCAAgC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA,iDAAiD,kEAAkE;AACnH;AACA;AACA;AACA;AACA;AACA,+CAA+C,uCAAuC;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,sHAAsH,iCAAiC,EAAE;AACzJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,gCAAgC,YAAY;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iCAAiC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,kCAAkC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,YAAY,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA,4DAA4D,YAAY,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,kCAAkC,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,qCAAqC,EAAE;AACzF;AACA;AACA;AACA;AACA,kDAAkD,qCAAqC,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iDAAiD,EAAE;AAChG;AACA,yDAAyD,kCAAkC,EAAE;AAC7F;AACA;AACA,2CAA2C,uBAAuB;AAClE,oCAAoC,iCAAiC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,sCAAsC,UAAU,EAAE,EAAE;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,8BAA8B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,+BAA+B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sCAAsC,EAAE;AAC9E;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sBAAsB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iCAAiC,EAAE;AACrE;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,4BAA4B;AAC5B;AACA;AACA,sDAAsD;AACtD;AACA;AACA,sDAAsD;AACtD;AACA,6CAA6C;AAC7C,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;;;;;;ACjmFD;AACA,EAAE,KAA4D;AAC9D,EAAE,SACkD;AACpD,CAAC,4BAA4B;;AAE7B;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gDAAgD,cAAc;;AAE9D,CAAC;;;;;;;;;;;;;;;;;;ACnED;;;AAGAA,MAAM,CAACC,OAAP;AAAA;AAAA;AACE,sBAAYC,WAAZ,EAAyBC,aAAzB,EAA2K;AAAA,QAAnIC,WAAmI,uEAAvH,CAAC,YAAD,CAAuH;AAAA,QAAxGC,YAAwG;AAAA,QAA3FC,UAA2F,uEAAhF,CAAC,WAAD,CAAgF;AAAA,QAAjEC,SAAiE;AAAA,QAAtDC,UAAsD;AAAA,QAA1CC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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/scripts/script.js\");\n","/* flatpickr v4.6.6, @license MIT */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = global || self, global.flatpickr = factory());\n}(this, (function () { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __spreadArrays() {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    }\n\n    var HOOKS = [\n        \"onChange\",\n        \"onClose\",\n        \"onDayCreate\",\n        \"onDestroy\",\n        \"onKeyDown\",\n        \"onMonthChange\",\n        \"onOpen\",\n        \"onParseConfig\",\n        \"onReady\",\n        \"onValueUpdate\",\n        \"onYearChange\",\n        \"onPreCalendarPosition\",\n    ];\n    var defaults = {\n        _disable: [],\n        _enable: [],\n        allowInput: false,\n        allowInvalidPreload: false,\n        altFormat: \"F j, Y\",\n        altInput: false,\n        altInputClass: \"form-control input\",\n        animate: typeof window === \"object\" &&\n            window.navigator.userAgent.indexOf(\"MSIE\") === -1,\n        ariaDateFormat: \"F j, Y\",\n        autoFillDefaultTime: true,\n        clickOpens: true,\n        closeOnSelect: true,\n        conjunction: \", \",\n        dateFormat: \"Y-m-d\",\n        defaultHour: 12,\n        defaultMinute: 0,\n        defaultSeconds: 0,\n        disable: [],\n        disableMobile: false,\n        enable: [],\n        enableSeconds: false,\n        enableTime: false,\n        errorHandler: function (err) {\n            return typeof console !== \"undefined\" && console.warn(err);\n        },\n        getWeek: function (givenDate) {\n            var date = new Date(givenDate.getTime());\n            date.setHours(0, 0, 0, 0);\n            // Thursday in current week decides the year.\n            date.setDate(date.getDate() + 3 - ((date.getDay() + 6) % 7));\n            // January 4 is always in week 1.\n            var week1 = new Date(date.getFullYear(), 0, 4);\n            // Adjust to Thursday in week 1 and count number of weeks from date to week1.\n            return (1 +\n                Math.round(((date.getTime() - week1.getTime()) / 86400000 -\n                    3 +\n                    ((week1.getDay() + 6) % 7)) /\n                    7));\n        },\n        hourIncrement: 1,\n        ignoredFocusElements: [],\n        inline: false,\n        locale: \"default\",\n        minuteIncrement: 5,\n        mode: \"single\",\n        monthSelectorType: \"dropdown\",\n        nextArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>\",\n        noCalendar: false,\n        now: new Date(),\n        onChange: [],\n        onClose: [],\n        onDayCreate: [],\n        onDestroy: [],\n        onKeyDown: [],\n        onMonthChange: [],\n        onOpen: [],\n        onParseConfig: [],\n        onReady: [],\n        onValueUpdate: [],\n        onYearChange: [],\n        onPreCalendarPosition: [],\n        plugins: [],\n        position: \"auto\",\n        positionElement: undefined,\n        prevArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>\",\n        shorthandCurrentMonth: false,\n        showMonths: 1,\n        static: false,\n        time_24hr: false,\n        weekNumbers: false,\n        wrap: false,\n    };\n\n    var english = {\n        weekdays: {\n            shorthand: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n            longhand: [\n                \"Sunday\",\n                \"Monday\",\n                \"Tuesday\",\n                \"Wednesday\",\n                \"Thursday\",\n                \"Friday\",\n                \"Saturday\",\n            ],\n        },\n        months: {\n            shorthand: [\n                \"Jan\",\n                \"Feb\",\n                \"Mar\",\n                \"Apr\",\n                \"May\",\n                \"Jun\",\n                \"Jul\",\n                \"Aug\",\n                \"Sep\",\n                \"Oct\",\n                \"Nov\",\n                \"Dec\",\n            ],\n            longhand: [\n                \"January\",\n                \"February\",\n                \"March\",\n                \"April\",\n                \"May\",\n                \"June\",\n                \"July\",\n                \"August\",\n                \"September\",\n                \"October\",\n                \"November\",\n                \"December\",\n            ],\n        },\n        daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n        firstDayOfWeek: 0,\n        ordinal: function (nth) {\n            var s = nth % 100;\n            if (s > 3 && s < 21)\n                return \"th\";\n            switch (s % 10) {\n                case 1:\n                    return \"st\";\n                case 2:\n                    return \"nd\";\n                case 3:\n                    return \"rd\";\n                default:\n                    return \"th\";\n            }\n        },\n        rangeSeparator: \" to \",\n        weekAbbreviation: \"Wk\",\n        scrollTitle: \"Scroll to increment\",\n        toggleTitle: \"Click to toggle\",\n        amPM: [\"AM\", \"PM\"],\n        yearAriaLabel: \"Year\",\n        monthAriaLabel: \"Month\",\n        hourAriaLabel: \"Hour\",\n        minuteAriaLabel: \"Minute\",\n        time_24hr: false,\n    };\n\n    var pad = function (number, length) {\n        if (length === void 0) { length = 2; }\n        return (\"000\" + number).slice(length * -1);\n    };\n    var int = function (bool) { return (bool === true ? 1 : 0); };\n    /* istanbul ignore next */\n    function debounce(func, wait, immediate) {\n        if (immediate === void 0) { immediate = false; }\n        var timeout;\n        return function () {\n            var context = this, args = arguments;\n            timeout !== null && clearTimeout(timeout);\n            timeout = window.setTimeout(function () {\n                timeout = null;\n                if (!immediate)\n                    func.apply(context, args);\n            }, wait);\n            if (immediate && !timeout)\n                func.apply(context, args);\n        };\n    }\n    var arrayify = function (obj) {\n        return obj instanceof Array ? obj : [obj];\n    };\n\n    function toggleClass(elem, className, bool) {\n        if (bool === true)\n            return elem.classList.add(className);\n        elem.classList.remove(className);\n    }\n    function createElement(tag, className, content) {\n        var e = window.document.createElement(tag);\n        className = className || \"\";\n        content = content || \"\";\n        e.className = className;\n        if (content !== undefined)\n            e.textContent = content;\n        return e;\n    }\n    function clearNode(node) {\n        while (node.firstChild)\n            node.removeChild(node.firstChild);\n    }\n    function findParent(node, condition) {\n        if (condition(node))\n            return node;\n        else if (node.parentNode)\n            return findParent(node.parentNode, condition);\n        return undefined; // nothing found\n    }\n    function createNumberInput(inputClassName, opts) {\n        var wrapper = createElement(\"div\", \"numInputWrapper\"), numInput = createElement(\"input\", \"numInput \" + inputClassName), arrowUp = createElement(\"span\", \"arrowUp\"), arrowDown = createElement(\"span\", \"arrowDown\");\n        if (navigator.userAgent.indexOf(\"MSIE 9.0\") === -1) {\n            numInput.type = \"number\";\n        }\n        else {\n            numInput.type = \"text\";\n            numInput.pattern = \"\\\\d*\";\n        }\n        if (opts !== undefined)\n            for (var key in opts)\n                numInput.setAttribute(key, opts[key]);\n        wrapper.appendChild(numInput);\n        wrapper.appendChild(arrowUp);\n        wrapper.appendChild(arrowDown);\n        return wrapper;\n    }\n    function getEventTarget(event) {\n        try {\n            if (typeof event.composedPath === \"function\") {\n                var path = event.composedPath();\n                return path[0];\n            }\n            return event.target;\n        }\n        catch (error) {\n            return event.target;\n        }\n    }\n\n    var doNothing = function () { return undefined; };\n    var monthToStr = function (monthNumber, shorthand, locale) { return locale.months[shorthand ? \"shorthand\" : \"longhand\"][monthNumber]; };\n    var revFormat = {\n        D: doNothing,\n        F: function (dateObj, monthName, locale) {\n            dateObj.setMonth(locale.months.longhand.indexOf(monthName));\n        },\n        G: function (dateObj, hour) {\n            dateObj.setHours(parseFloat(hour));\n        },\n        H: function (dateObj, hour) {\n            dateObj.setHours(parseFloat(hour));\n        },\n        J: function (dateObj, day) {\n            dateObj.setDate(parseFloat(day));\n        },\n        K: function (dateObj, amPM, locale) {\n            dateObj.setHours((dateObj.getHours() % 12) +\n                12 * int(new RegExp(locale.amPM[1], \"i\").test(amPM)));\n        },\n        M: function (dateObj, shortMonth, locale) {\n            dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));\n        },\n        S: function (dateObj, seconds) {\n            dateObj.setSeconds(parseFloat(seconds));\n        },\n        U: function (_, unixSeconds) { return new Date(parseFloat(unixSeconds) * 1000); },\n        W: function (dateObj, weekNum, locale) {\n            var weekNumber = parseInt(weekNum);\n            var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);\n            date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);\n            return date;\n        },\n        Y: function (dateObj, year) {\n            dateObj.setFullYear(parseFloat(year));\n        },\n        Z: function (_, ISODate) { return new Date(ISODate); },\n        d: function (dateObj, day) {\n            dateObj.setDate(parseFloat(day));\n        },\n        h: function (dateObj, hour) {\n            dateObj.setHours(parseFloat(hour));\n        },\n        i: function (dateObj, minutes) {\n            dateObj.setMinutes(parseFloat(minutes));\n        },\n        j: function (dateObj, day) {\n            dateObj.setDate(parseFloat(day));\n        },\n        l: doNothing,\n        m: function (dateObj, month) {\n            dateObj.setMonth(parseFloat(month) - 1);\n        },\n        n: function (dateObj, month) {\n            dateObj.setMonth(parseFloat(month) - 1);\n        },\n        s: function (dateObj, seconds) {\n            dateObj.setSeconds(parseFloat(seconds));\n        },\n        u: function (_, unixMillSeconds) {\n            return new Date(parseFloat(unixMillSeconds));\n        },\n        w: doNothing,\n        y: function (dateObj, year) {\n            dateObj.setFullYear(2000 + parseFloat(year));\n        },\n    };\n    var tokenRegex = {\n        D: \"(\\\\w+)\",\n        F: \"(\\\\w+)\",\n        G: \"(\\\\d\\\\d|\\\\d)\",\n        H: \"(\\\\d\\\\d|\\\\d)\",\n        J: \"(\\\\d\\\\d|\\\\d)\\\\w+\",\n        K: \"\",\n        M: \"(\\\\w+)\",\n        S: \"(\\\\d\\\\d|\\\\d)\",\n        U: \"(.+)\",\n        W: \"(\\\\d\\\\d|\\\\d)\",\n        Y: \"(\\\\d{4})\",\n        Z: \"(.+)\",\n        d: \"(\\\\d\\\\d|\\\\d)\",\n        h: \"(\\\\d\\\\d|\\\\d)\",\n        i: \"(\\\\d\\\\d|\\\\d)\",\n        j: \"(\\\\d\\\\d|\\\\d)\",\n        l: \"(\\\\w+)\",\n        m: \"(\\\\d\\\\d|\\\\d)\",\n        n: \"(\\\\d\\\\d|\\\\d)\",\n        s: \"(\\\\d\\\\d|\\\\d)\",\n        u: \"(.+)\",\n        w: \"(\\\\d\\\\d|\\\\d)\",\n        y: \"(\\\\d{2})\",\n    };\n    var formats = {\n        // get the date in UTC\n        Z: function (date) { return date.toISOString(); },\n        // weekday name, short, e.g. Thu\n        D: function (date, locale, options) {\n            return locale.weekdays.shorthand[formats.w(date, locale, options)];\n        },\n        // full month name e.g. January\n        F: function (date, locale, options) {\n            return monthToStr(formats.n(date, locale, options) - 1, false, locale);\n        },\n        // padded hour 1-12\n        G: function (date, locale, options) {\n            return pad(formats.h(date, locale, options));\n        },\n        // hours with leading zero e.g. 03\n        H: function (date) { return pad(date.getHours()); },\n        // day (1-30) with ordinal suffix e.g. 1st, 2nd\n        J: function (date, locale) {\n            return locale.ordinal !== undefined\n                ? date.getDate() + locale.ordinal(date.getDate())\n                : date.getDate();\n        },\n        // AM/PM\n        K: function (date, locale) { return locale.amPM[int(date.getHours() > 11)]; },\n        // shorthand month e.g. Jan, Sep, Oct, etc\n        M: function (date, locale) {\n            return monthToStr(date.getMonth(), true, locale);\n        },\n        // seconds 00-59\n        S: function (date) { return pad(date.getSeconds()); },\n        // unix timestamp\n        U: function (date) { return date.getTime() / 1000; },\n        W: function (date, _, options) {\n            return options.getWeek(date);\n        },\n        // full year e.g. 2016, padded (0001-9999)\n        Y: function (date) { return pad(date.getFullYear(), 4); },\n        // day in month, padded (01-30)\n        d: function (date) { return pad(date.getDate()); },\n        // hour from 1-12 (am/pm)\n        h: function (date) { return (date.getHours() % 12 ? date.getHours() % 12 : 12); },\n        // minutes, padded with leading zero e.g. 09\n        i: function (date) { return pad(date.getMinutes()); },\n        // day in month (1-30)\n        j: function (date) { return date.getDate(); },\n        // weekday name, full, e.g. Thursday\n        l: function (date, locale) {\n            return locale.weekdays.longhand[date.getDay()];\n        },\n        // padded month number (01-12)\n        m: function (date) { return pad(date.getMonth() + 1); },\n        // the month number (1-12)\n        n: function (date) { return date.getMonth() + 1; },\n        // seconds 0-59\n        s: function (date) { return date.getSeconds(); },\n        // Unix Milliseconds\n        u: function (date) { return date.getTime(); },\n        // number of the day of the week\n        w: function (date) { return date.getDay(); },\n        // last two digits of year e.g. 16 for 2016\n        y: function (date) { return String(date.getFullYear()).substring(2); },\n    };\n\n    var createDateFormatter = function (_a) {\n        var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;\n        return function (dateObj, frmt, overrideLocale) {\n            var locale = overrideLocale || l10n;\n            if (config.formatDate !== undefined && !isMobile) {\n                return config.formatDate(dateObj, frmt, locale);\n            }\n            return frmt\n                .split(\"\")\n                .map(function (c, i, arr) {\n                return formats[c] && arr[i - 1] !== \"\\\\\"\n                    ? formats[c](dateObj, locale, config)\n                    : c !== \"\\\\\"\n                        ? c\n                        : \"\";\n            })\n                .join(\"\");\n        };\n    };\n    var createDateParser = function (_a) {\n        var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;\n        return function (date, givenFormat, timeless, customLocale) {\n            if (date !== 0 && !date)\n                return undefined;\n            var locale = customLocale || l10n;\n            var parsedDate;\n            var dateOrig = date;\n            if (date instanceof Date)\n                parsedDate = new Date(date.getTime());\n            else if (typeof date !== \"string\" &&\n                date.toFixed !== undefined // timestamp\n            )\n                // create a copy\n                parsedDate = new Date(date);\n            else if (typeof date === \"string\") {\n                // date string\n                var format = givenFormat || (config || defaults).dateFormat;\n                var datestr = String(date).trim();\n                if (datestr === \"today\") {\n                    parsedDate = new Date();\n                    timeless = true;\n                }\n                else if (/Z$/.test(datestr) ||\n                    /GMT$/.test(datestr) // datestrings w/ timezone\n                )\n                    parsedDate = new Date(date);\n                else if (config && config.parseDate)\n                    parsedDate = config.parseDate(date, format);\n                else {\n                    parsedDate =\n                        !config || !config.noCalendar\n                            ? new Date(new Date().getFullYear(), 0, 1, 0, 0, 0, 0)\n                            : new Date(new Date().setHours(0, 0, 0, 0));\n                    var matched = void 0, ops = [];\n                    for (var i = 0, matchIndex = 0, regexStr = \"\"; i < format.length; i++) {\n                        var token_1 = format[i];\n                        var isBackSlash = token_1 === \"\\\\\";\n                        var escaped = format[i - 1] === \"\\\\\" || isBackSlash;\n                        if (tokenRegex[token_1] && !escaped) {\n                            regexStr += tokenRegex[token_1];\n                            var match = new RegExp(regexStr).exec(date);\n                            if (match && (matched = true)) {\n                                ops[token_1 !== \"Y\" ? \"push\" : \"unshift\"]({\n                                    fn: revFormat[token_1],\n                                    val: match[++matchIndex],\n                                });\n                            }\n                        }\n                        else if (!isBackSlash)\n                            regexStr += \".\"; // don't really care\n                        ops.forEach(function (_a) {\n                            var fn = _a.fn, val = _a.val;\n                            return (parsedDate = fn(parsedDate, val, locale) || parsedDate);\n                        });\n                    }\n                    parsedDate = matched ? parsedDate : undefined;\n                }\n            }\n            /* istanbul ignore next */\n            if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {\n                config.errorHandler(new Error(\"Invalid date provided: \" + dateOrig));\n                return undefined;\n            }\n            if (timeless === true)\n                parsedDate.setHours(0, 0, 0, 0);\n            return parsedDate;\n        };\n    };\n    /**\n     * Compute the difference in dates, measured in ms\n     */\n    function compareDates(date1, date2, timeless) {\n        if (timeless === void 0) { timeless = true; }\n        if (timeless !== false) {\n            return (new Date(date1.getTime()).setHours(0, 0, 0, 0) -\n                new Date(date2.getTime()).setHours(0, 0, 0, 0));\n        }\n        return date1.getTime() - date2.getTime();\n    }\n    var isBetween = function (ts, ts1, ts2) {\n        return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);\n    };\n    var duration = {\n        DAY: 86400000,\n    };\n\n    if (typeof Object.assign !== \"function\") {\n        Object.assign = function (target) {\n            var args = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n            }\n            if (!target) {\n                throw TypeError(\"Cannot convert undefined or null to object\");\n            }\n            var _loop_1 = function (source) {\n                if (source) {\n                    Object.keys(source).forEach(function (key) { return (target[key] = source[key]); });\n                }\n            };\n            for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n                var source = args_1[_a];\n                _loop_1(source);\n            }\n            return target;\n        };\n    }\n\n    var DEBOUNCED_CHANGE_MS = 300;\n    function FlatpickrInstance(element, instanceConfig) {\n        var self = {\n            config: __assign(__assign({}, defaults), flatpickr.defaultConfig),\n            l10n: english,\n        };\n        self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n        self._handlers = [];\n        self.pluginElements = [];\n        self.loadedPlugins = [];\n        self._bind = bind;\n        self._setHoursFromDate = setHoursFromDate;\n        self._positionCalendar = positionCalendar;\n        self.changeMonth = changeMonth;\n        self.changeYear = changeYear;\n        self.clear = clear;\n        self.close = close;\n        self._createElement = createElement;\n        self.destroy = destroy;\n        self.isEnabled = isEnabled;\n        self.jumpToDate = jumpToDate;\n        self.open = open;\n        self.redraw = redraw;\n        self.set = set;\n        self.setDate = setDate;\n        self.toggle = toggle;\n        function setupHelperFunctions() {\n            self.utils = {\n                getDaysInMonth: function (month, yr) {\n                    if (month === void 0) { month = self.currentMonth; }\n                    if (yr === void 0) { yr = self.currentYear; }\n                    if (month === 1 && ((yr % 4 === 0 && yr % 100 !== 0) || yr % 400 === 0))\n                        return 29;\n                    return self.l10n.daysInMonth[month];\n                },\n            };\n        }\n        function init() {\n            self.element = self.input = element;\n            self.isOpen = false;\n            parseConfig();\n            setupLocale();\n            setupInputs();\n            setupDates();\n            setupHelperFunctions();\n            if (!self.isMobile)\n                build();\n            bindEvents();\n            if (self.selectedDates.length || self.config.noCalendar) {\n                if (self.config.enableTime) {\n                    setHoursFromDate(self.config.noCalendar\n                        ? self.latestSelectedDateObj || self.config.minDate\n                        : undefined);\n                }\n                updateValue(false);\n            }\n            setCalendarWidth();\n            var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n            /* TODO: investigate this further\n        \n              Currently, there is weird positioning behavior in safari causing pages\n              to scroll up. https://github.com/chmln/flatpickr/issues/563\n        \n              However, most browsers are not Safari and positioning is expensive when used\n              in scale. https://github.com/chmln/flatpickr/issues/1096\n            */\n            if (!self.isMobile && isSafari) {\n                positionCalendar();\n            }\n            triggerEvent(\"onReady\");\n        }\n        function bindToInstance(fn) {\n            return fn.bind(self);\n        }\n        function setCalendarWidth() {\n            var config = self.config;\n            if (config.weekNumbers === false && config.showMonths === 1) {\n                return;\n            }\n            else if (config.noCalendar !== true) {\n                window.requestAnimationFrame(function () {\n                    if (self.calendarContainer !== undefined) {\n                        self.calendarContainer.style.visibility = \"hidden\";\n                        self.calendarContainer.style.display = \"block\";\n                    }\n                    if (self.daysContainer !== undefined) {\n                        var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;\n                        self.daysContainer.style.width = daysWidth + \"px\";\n                        self.calendarContainer.style.width =\n                            daysWidth +\n                                (self.weekWrapper !== undefined\n                                    ? self.weekWrapper.offsetWidth\n                                    : 0) +\n                                \"px\";\n                        self.calendarContainer.style.removeProperty(\"visibility\");\n                        self.calendarContainer.style.removeProperty(\"display\");\n                    }\n                });\n            }\n        }\n        /**\n         * The handler for all events targeting the time inputs\n         */\n        function updateTime(e) {\n            if (self.selectedDates.length === 0) {\n                var defaultDate = self.config.minDate !== undefined\n                    ? new Date(self.config.minDate.getTime())\n                    : new Date();\n                var _a = getDefaultHours(), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;\n                defaultDate.setHours(hours, minutes, seconds, 0);\n                self.setDate(defaultDate, false);\n            }\n            if (e !== undefined && e.type !== \"blur\") {\n                timeWrapper(e);\n            }\n            var prevValue = self._input.value;\n            setHoursFromInputs();\n            updateValue();\n            if (self._input.value !== prevValue) {\n                self._debouncedChange();\n            }\n        }\n        function ampm2military(hour, amPM) {\n            return (hour % 12) + 12 * int(amPM === self.l10n.amPM[1]);\n        }\n        function military2ampm(hour) {\n            switch (hour % 24) {\n                case 0:\n                case 12:\n                    return 12;\n                default:\n                    return hour % 12;\n            }\n        }\n        /**\n         * Syncs the selected date object time with user's time input\n         */\n        function setHoursFromInputs() {\n            if (self.hourElement === undefined || self.minuteElement === undefined)\n                return;\n            var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== undefined\n                ? (parseInt(self.secondElement.value, 10) || 0) % 60\n                : 0;\n            if (self.amPM !== undefined) {\n                hours = ampm2military(hours, self.amPM.textContent);\n            }\n            var limitMinHours = self.config.minTime !== undefined ||\n                (self.config.minDate &&\n                    self.minDateHasTime &&\n                    self.latestSelectedDateObj &&\n                    compareDates(self.latestSelectedDateObj, self.config.minDate, true) ===\n                        0);\n            var limitMaxHours = self.config.maxTime !== undefined ||\n                (self.config.maxDate &&\n                    self.maxDateHasTime &&\n                    self.latestSelectedDateObj &&\n                    compareDates(self.latestSelectedDateObj, self.config.maxDate, true) ===\n                        0);\n            if (limitMaxHours) {\n                var maxTime = self.config.maxTime !== undefined\n                    ? self.config.maxTime\n                    : self.config.maxDate;\n                hours = Math.min(hours, maxTime.getHours());\n                if (hours === maxTime.getHours())\n                    minutes = Math.min(minutes, maxTime.getMinutes());\n                if (minutes === maxTime.getMinutes())\n                    seconds = Math.min(seconds, maxTime.getSeconds());\n            }\n            if (limitMinHours) {\n                var minTime = self.config.minTime !== undefined\n                    ? self.config.minTime\n                    : self.config.minDate;\n                hours = Math.max(hours, minTime.getHours());\n                if (hours === minTime.getHours())\n                    minutes = Math.max(minutes, minTime.getMinutes());\n                if (minutes === minTime.getMinutes())\n                    seconds = Math.max(seconds, minTime.getSeconds());\n            }\n            setHours(hours, minutes, seconds);\n        }\n        /**\n         * Syncs time input values with a date\n         */\n        function setHoursFromDate(dateObj) {\n            var date = dateObj || self.latestSelectedDateObj;\n            if (date) {\n                setHours(date.getHours(), date.getMinutes(), date.getSeconds());\n            }\n        }\n        function getDefaultHours() {\n            var hours = self.config.defaultHour;\n            var minutes = self.config.defaultMinute;\n            var seconds = self.config.defaultSeconds;\n            if (self.config.minDate !== undefined) {\n                var minHr = self.config.minDate.getHours();\n                var minMinutes = self.config.minDate.getMinutes();\n                hours = Math.max(hours, minHr);\n                if (hours === minHr)\n                    minutes = Math.max(minMinutes, minutes);\n                if (hours === minHr && minutes === minMinutes)\n                    seconds = self.config.minDate.getSeconds();\n            }\n            if (self.config.maxDate !== undefined) {\n                var maxHr = self.config.maxDate.getHours();\n                var maxMinutes = self.config.maxDate.getMinutes();\n                hours = Math.min(hours, maxHr);\n                if (hours === maxHr)\n                    minutes = Math.min(maxMinutes, minutes);\n                if (hours === maxHr && minutes === maxMinutes)\n                    seconds = self.config.maxDate.getSeconds();\n            }\n            return { hours: hours, minutes: minutes, seconds: seconds };\n        }\n        /**\n         * Sets the hours, minutes, and optionally seconds\n         * of the latest selected date object and the\n         * corresponding time inputs\n         * @param {Number} hours the hour. whether its military\n         *                 or am-pm gets inferred from config\n         * @param {Number} minutes the minutes\n         * @param {Number} seconds the seconds (optional)\n         */\n        function setHours(hours, minutes, seconds) {\n            if (self.latestSelectedDateObj !== undefined) {\n                self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);\n            }\n            if (!self.hourElement || !self.minuteElement || self.isMobile)\n                return;\n            self.hourElement.value = pad(!self.config.time_24hr\n                ? ((12 + hours) % 12) + 12 * int(hours % 12 === 0)\n                : hours);\n            self.minuteElement.value = pad(minutes);\n            if (self.amPM !== undefined)\n                self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];\n            if (self.secondElement !== undefined)\n                self.secondElement.value = pad(seconds);\n        }\n        /**\n         * Handles the year input and incrementing events\n         * @param {Event} event the keyup or increment event\n         */\n        function onYearInput(event) {\n            var eventTarget = getEventTarget(event);\n            var year = parseInt(eventTarget.value) + (event.delta || 0);\n            if (year / 1000 > 1 ||\n                (event.key === \"Enter\" && !/[^\\d]/.test(year.toString()))) {\n                changeYear(year);\n            }\n        }\n        /**\n         * Essentially addEventListener + tracking\n         * @param {Element} element the element to addEventListener to\n         * @param {String} event the event name\n         * @param {Function} handler the event handler\n         */\n        function bind(element, event, handler, options) {\n            if (event instanceof Array)\n                return event.forEach(function (ev) { return bind(element, ev, handler, options); });\n            if (element instanceof Array)\n                return element.forEach(function (el) { return bind(el, event, handler, options); });\n            element.addEventListener(event, handler, options);\n            self._handlers.push({\n                element: element,\n                event: event,\n                handler: handler,\n                options: options,\n            });\n        }\n        function triggerChange() {\n            triggerEvent(\"onChange\");\n        }\n        /**\n         * Adds all the necessary event listeners\n         */\n        function bindEvents() {\n            if (self.config.wrap) {\n                [\"open\", \"close\", \"toggle\", \"clear\"].forEach(function (evt) {\n                    Array.prototype.forEach.call(self.element.querySelectorAll(\"[data-\" + evt + \"]\"), function (el) {\n                        return bind(el, \"click\", self[evt]);\n                    });\n                });\n            }\n            if (self.isMobile) {\n                setupMobile();\n                return;\n            }\n            var debouncedResize = debounce(onResize, 50);\n            self._debouncedChange = debounce(triggerChange, DEBOUNCED_CHANGE_MS);\n            if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))\n                bind(self.daysContainer, \"mouseover\", function (e) {\n                    if (self.config.mode === \"range\")\n                        onMouseOver(getEventTarget(e));\n                });\n            bind(window.document.body, \"keydown\", onKeyDown);\n            if (!self.config.inline && !self.config.static)\n                bind(window, \"resize\", debouncedResize);\n            if (window.ontouchstart !== undefined)\n                bind(window.document, \"touchstart\", documentClick);\n            else\n                bind(window.document, \"click\", documentClick);\n            bind(window.document, \"focus\", documentClick, { capture: true });\n            if (self.config.clickOpens === true) {\n                bind(self._input, \"focus\", self.open);\n                bind(self._input, \"click\", self.open);\n            }\n            if (self.daysContainer !== undefined) {\n                bind(self.monthNav, \"click\", onMonthNavClick);\n                bind(self.monthNav, [\"keyup\", \"increment\"], onYearInput);\n                bind(self.daysContainer, \"click\", selectDate);\n            }\n            if (self.timeContainer !== undefined &&\n                self.minuteElement !== undefined &&\n                self.hourElement !== undefined) {\n                var selText = function (e) {\n                    return getEventTarget(e).select();\n                };\n                bind(self.timeContainer, [\"increment\"], updateTime);\n                bind(self.timeContainer, \"blur\", updateTime, { capture: true });\n                bind(self.timeContainer, \"click\", timeIncrement);\n                bind([self.hourElement, self.minuteElement], [\"focus\", \"click\"], selText);\n                if (self.secondElement !== undefined)\n                    bind(self.secondElement, \"focus\", function () { return self.secondElement && self.secondElement.select(); });\n                if (self.amPM !== undefined) {\n                    bind(self.amPM, \"click\", function (e) {\n                        updateTime(e);\n                        triggerChange();\n                    });\n                }\n            }\n            if (self.config.allowInput)\n                bind(self._input, \"blur\", onBlur);\n        }\n        /**\n         * Set the calendar view to a particular date.\n         * @param {Date} jumpDate the date to set the view to\n         * @param {boolean} triggerChange if change events should be triggered\n         */\n        function jumpToDate(jumpDate, triggerChange) {\n            var jumpTo = jumpDate !== undefined\n                ? self.parseDate(jumpDate)\n                : self.latestSelectedDateObj ||\n                    (self.config.minDate && self.config.minDate > self.now\n                        ? self.config.minDate\n                        : self.config.maxDate && self.config.maxDate < self.now\n                            ? self.config.maxDate\n                            : self.now);\n            var oldYear = self.currentYear;\n            var oldMonth = self.currentMonth;\n            try {\n                if (jumpTo !== undefined) {\n                    self.currentYear = jumpTo.getFullYear();\n                    self.currentMonth = jumpTo.getMonth();\n                }\n            }\n            catch (e) {\n                /* istanbul ignore next */\n                e.message = \"Invalid date supplied: \" + jumpTo;\n                self.config.errorHandler(e);\n            }\n            if (triggerChange && self.currentYear !== oldYear) {\n                triggerEvent(\"onYearChange\");\n                buildMonthSwitch();\n            }\n            if (triggerChange &&\n                (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {\n                triggerEvent(\"onMonthChange\");\n            }\n            self.redraw();\n        }\n        /**\n         * The up/down arrow handler for time inputs\n         * @param {Event} e the click event\n         */\n        function timeIncrement(e) {\n            var eventTarget = getEventTarget(e);\n            if (~eventTarget.className.indexOf(\"arrow\"))\n                incrementNumInput(e, eventTarget.classList.contains(\"arrowUp\") ? 1 : -1);\n        }\n        /**\n         * Increments/decrements the value of input associ-\n         * ated with the up/down arrow by dispatching an\n         * \"increment\" event on the input.\n         *\n         * @param {Event} e the click event\n         * @param {Number} delta the diff (usually 1 or -1)\n         * @param {Element} inputElem the input element\n         */\n        function incrementNumInput(e, delta, inputElem) {\n            var target = e && getEventTarget(e);\n            var input = inputElem ||\n                (target && target.parentNode && target.parentNode.firstChild);\n            var event = createEvent(\"increment\");\n            event.delta = delta;\n            input && input.dispatchEvent(event);\n        }\n        function build() {\n            var fragment = window.document.createDocumentFragment();\n            self.calendarContainer = createElement(\"div\", \"flatpickr-calendar\");\n            self.calendarContainer.tabIndex = -1;\n            if (!self.config.noCalendar) {\n                fragment.appendChild(buildMonthNav());\n                self.innerContainer = createElement(\"div\", \"flatpickr-innerContainer\");\n                if (self.config.weekNumbers) {\n                    var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;\n                    self.innerContainer.appendChild(weekWrapper);\n                    self.weekNumbers = weekNumbers;\n                    self.weekWrapper = weekWrapper;\n                }\n                self.rContainer = createElement(\"div\", \"flatpickr-rContainer\");\n                self.rContainer.appendChild(buildWeekdays());\n                if (!self.daysContainer) {\n                    self.daysContainer = createElement(\"div\", \"flatpickr-days\");\n                    self.daysContainer.tabIndex = -1;\n                }\n                buildDays();\n                self.rContainer.appendChild(self.daysContainer);\n                self.innerContainer.appendChild(self.rContainer);\n                fragment.appendChild(self.innerContainer);\n            }\n            if (self.config.enableTime) {\n                fragment.appendChild(buildTime());\n            }\n            toggleClass(self.calendarContainer, \"rangeMode\", self.config.mode === \"range\");\n            toggleClass(self.calendarContainer, \"animate\", self.config.animate === true);\n            toggleClass(self.calendarContainer, \"multiMonth\", self.config.showMonths > 1);\n            self.calendarContainer.appendChild(fragment);\n            var customAppend = self.config.appendTo !== undefined &&\n                self.config.appendTo.nodeType !== undefined;\n            if (self.config.inline || self.config.static) {\n                self.calendarContainer.classList.add(self.config.inline ? \"inline\" : \"static\");\n                if (self.config.inline) {\n                    if (!customAppend && self.element.parentNode)\n                        self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);\n                    else if (self.config.appendTo !== undefined)\n                        self.config.appendTo.appendChild(self.calendarContainer);\n                }\n                if (self.config.static) {\n                    var wrapper = createElement(\"div\", \"flatpickr-wrapper\");\n                    if (self.element.parentNode)\n                        self.element.parentNode.insertBefore(wrapper, self.element);\n                    wrapper.appendChild(self.element);\n                    if (self.altInput)\n                        wrapper.appendChild(self.altInput);\n                    wrapper.appendChild(self.calendarContainer);\n                }\n            }\n            if (!self.config.static && !self.config.inline)\n                (self.config.appendTo !== undefined\n                    ? self.config.appendTo\n                    : window.document.body).appendChild(self.calendarContainer);\n        }\n        function createDay(className, date, dayNumber, i) {\n            var dateIsEnabled = isEnabled(date, true), dayElement = createElement(\"span\", \"flatpickr-day \" + className, date.getDate().toString());\n            dayElement.dateObj = date;\n            dayElement.$i = i;\n            dayElement.setAttribute(\"aria-label\", self.formatDate(date, self.config.ariaDateFormat));\n            if (className.indexOf(\"hidden\") === -1 &&\n                compareDates(date, self.now) === 0) {\n                self.todayDateElem = dayElement;\n                dayElement.classList.add(\"today\");\n                dayElement.setAttribute(\"aria-current\", \"date\");\n            }\n            if (dateIsEnabled) {\n                dayElement.tabIndex = -1;\n                if (isDateSelected(date)) {\n                    dayElement.classList.add(\"selected\");\n                    self.selectedDateElem = dayElement;\n                    if (self.config.mode === \"range\") {\n                        toggleClass(dayElement, \"startRange\", self.selectedDates[0] &&\n                            compareDates(date, self.selectedDates[0], true) === 0);\n                        toggleClass(dayElement, \"endRange\", self.selectedDates[1] &&\n                            compareDates(date, self.selectedDates[1], true) === 0);\n                        if (className === \"nextMonthDay\")\n                            dayElement.classList.add(\"inRange\");\n                    }\n                }\n            }\n            else {\n                dayElement.classList.add(\"flatpickr-disabled\");\n            }\n            if (self.config.mode === \"range\") {\n                if (isDateInRange(date) && !isDateSelected(date))\n                    dayElement.classList.add(\"inRange\");\n            }\n            if (self.weekNumbers &&\n                self.config.showMonths === 1 &&\n                className !== \"prevMonthDay\" &&\n                dayNumber % 7 === 1) {\n                self.weekNumbers.insertAdjacentHTML(\"beforeend\", \"<span class='flatpickr-day'>\" + self.config.getWeek(date) + \"</span>\");\n            }\n            triggerEvent(\"onDayCreate\", dayElement);\n            return dayElement;\n        }\n        function focusOnDayElem(targetNode) {\n            targetNode.focus();\n            if (self.config.mode === \"range\")\n                onMouseOver(targetNode);\n        }\n        function getFirstAvailableDay(delta) {\n            var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;\n            var endMonth = delta > 0 ? self.config.showMonths : -1;\n            for (var m = startMonth; m != endMonth; m += delta) {\n                var month = self.daysContainer.children[m];\n                var startIndex = delta > 0 ? 0 : month.children.length - 1;\n                var endIndex = delta > 0 ? month.children.length : -1;\n                for (var i = startIndex; i != endIndex; i += delta) {\n                    var c = month.children[i];\n                    if (c.className.indexOf(\"hidden\") === -1 && isEnabled(c.dateObj))\n                        return c;\n                }\n            }\n            return undefined;\n        }\n        function getNextAvailableDay(current, delta) {\n            var givenMonth = current.className.indexOf(\"Month\") === -1\n                ? current.dateObj.getMonth()\n                : self.currentMonth;\n            var endMonth = delta > 0 ? self.config.showMonths : -1;\n            var loopDelta = delta > 0 ? 1 : -1;\n            for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {\n                var month = self.daysContainer.children[m];\n                var startIndex = givenMonth - self.currentMonth === m\n                    ? current.$i + delta\n                    : delta < 0\n                        ? month.children.length - 1\n                        : 0;\n                var numMonthDays = month.children.length;\n                for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {\n                    var c = month.children[i];\n                    if (c.className.indexOf(\"hidden\") === -1 &&\n                        isEnabled(c.dateObj) &&\n                        Math.abs(current.$i - i) >= Math.abs(delta))\n                        return focusOnDayElem(c);\n                }\n            }\n            self.changeMonth(loopDelta);\n            focusOnDay(getFirstAvailableDay(loopDelta), 0);\n            return undefined;\n        }\n        function focusOnDay(current, offset) {\n            var dayFocused = isInView(document.activeElement || document.body);\n            var startElem = current !== undefined\n                ? current\n                : dayFocused\n                    ? document.activeElement\n                    : self.selectedDateElem !== undefined && isInView(self.selectedDateElem)\n                        ? self.selectedDateElem\n                        : self.todayDateElem !== undefined && isInView(self.todayDateElem)\n                            ? self.todayDateElem\n                            : getFirstAvailableDay(offset > 0 ? 1 : -1);\n            if (startElem === undefined) {\n                self._input.focus();\n            }\n            else if (!dayFocused) {\n                focusOnDayElem(startElem);\n            }\n            else {\n                getNextAvailableDay(startElem, offset);\n            }\n        }\n        function buildMonthDays(year, month) {\n            var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;\n            var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);\n            var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? \"prevMonthDay hidden\" : \"prevMonthDay\", nextMonthDayClass = isMultiMonth ? \"nextMonthDay hidden\" : \"nextMonthDay\";\n            var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;\n            // prepend days from the ending of previous month\n            for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {\n                days.appendChild(createDay(prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));\n            }\n            // Start at 1 since there is no 0th day\n            for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {\n                days.appendChild(createDay(\"\", new Date(year, month, dayNumber), dayNumber, dayIndex));\n            }\n            // append days from the next month\n            for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth &&\n                (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {\n                days.appendChild(createDay(nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));\n            }\n            //updateNavigationCurrentMonth();\n            var dayContainer = createElement(\"div\", \"dayContainer\");\n            dayContainer.appendChild(days);\n            return dayContainer;\n        }\n        function buildDays() {\n            if (self.daysContainer === undefined) {\n                return;\n            }\n            clearNode(self.daysContainer);\n            // TODO: week numbers for each month\n            if (self.weekNumbers)\n                clearNode(self.weekNumbers);\n            var frag = document.createDocumentFragment();\n            for (var i = 0; i < self.config.showMonths; i++) {\n                var d = new Date(self.currentYear, self.currentMonth, 1);\n                d.setMonth(self.currentMonth + i);\n                frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));\n            }\n            self.daysContainer.appendChild(frag);\n            self.days = self.daysContainer.firstChild;\n            if (self.config.mode === \"range\" && self.selectedDates.length === 1) {\n                onMouseOver();\n            }\n        }\n        function buildMonthSwitch() {\n            if (self.config.showMonths > 1 ||\n                self.config.monthSelectorType !== \"dropdown\")\n                return;\n            var shouldBuildMonth = function (month) {\n                if (self.config.minDate !== undefined &&\n                    self.currentYear === self.config.minDate.getFullYear() &&\n                    month < self.config.minDate.getMonth()) {\n                    return false;\n                }\n                return !(self.config.maxDate !== undefined &&\n                    self.currentYear === self.config.maxDate.getFullYear() &&\n                    month > self.config.maxDate.getMonth());\n            };\n            self.monthsDropdownContainer.tabIndex = -1;\n            self.monthsDropdownContainer.innerHTML = \"\";\n            for (var i = 0; i < 12; i++) {\n                if (!shouldBuildMonth(i))\n                    continue;\n                var month = createElement(\"option\", \"flatpickr-monthDropdown-month\");\n                month.value = new Date(self.currentYear, i).getMonth().toString();\n                month.textContent = monthToStr(i, self.config.shorthandCurrentMonth, self.l10n);\n                month.tabIndex = -1;\n                if (self.currentMonth === i) {\n                    month.selected = true;\n                }\n                self.monthsDropdownContainer.appendChild(month);\n            }\n        }\n        function buildMonth() {\n            var container = createElement(\"div\", \"flatpickr-month\");\n            var monthNavFragment = window.document.createDocumentFragment();\n            var monthElement;\n            if (self.config.showMonths > 1 ||\n                self.config.monthSelectorType === \"static\") {\n                monthElement = createElement(\"span\", \"cur-month\");\n            }\n            else {\n                self.monthsDropdownContainer = createElement(\"select\", \"flatpickr-monthDropdown-months\");\n                self.monthsDropdownContainer.setAttribute(\"aria-label\", self.l10n.monthAriaLabel);\n                bind(self.monthsDropdownContainer, \"change\", function (e) {\n                    var target = getEventTarget(e);\n                    var selectedMonth = parseInt(target.value, 10);\n                    self.changeMonth(selectedMonth - self.currentMonth);\n                    triggerEvent(\"onMonthChange\");\n                });\n                buildMonthSwitch();\n                monthElement = self.monthsDropdownContainer;\n            }\n            var yearInput = createNumberInput(\"cur-year\", { tabindex: \"-1\" });\n            var yearElement = yearInput.getElementsByTagName(\"input\")[0];\n            yearElement.setAttribute(\"aria-label\", self.l10n.yearAriaLabel);\n            if (self.config.minDate) {\n                yearElement.setAttribute(\"min\", self.config.minDate.getFullYear().toString());\n            }\n            if (self.config.maxDate) {\n                yearElement.setAttribute(\"max\", self.config.maxDate.getFullYear().toString());\n                yearElement.disabled =\n                    !!self.config.minDate &&\n                        self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();\n            }\n            var currentMonth = createElement(\"div\", \"flatpickr-current-month\");\n            currentMonth.appendChild(monthElement);\n            currentMonth.appendChild(yearInput);\n            monthNavFragment.appendChild(currentMonth);\n            container.appendChild(monthNavFragment);\n            return {\n                container: container,\n                yearElement: yearElement,\n                monthElement: monthElement,\n            };\n        }\n        function buildMonths() {\n            clearNode(self.monthNav);\n            self.monthNav.appendChild(self.prevMonthNav);\n            if (self.config.showMonths) {\n                self.yearElements = [];\n                self.monthElements = [];\n            }\n            for (var m = self.config.showMonths; m--;) {\n                var month = buildMonth();\n                self.yearElements.push(month.yearElement);\n                self.monthElements.push(month.monthElement);\n                self.monthNav.appendChild(month.container);\n            }\n            self.monthNav.appendChild(self.nextMonthNav);\n        }\n        function buildMonthNav() {\n            self.monthNav = createElement(\"div\", \"flatpickr-months\");\n            self.yearElements = [];\n            self.monthElements = [];\n            self.prevMonthNav = createElement(\"span\", \"flatpickr-prev-month\");\n            self.prevMonthNav.innerHTML = self.config.prevArrow;\n            self.nextMonthNav = createElement(\"span\", \"flatpickr-next-month\");\n            self.nextMonthNav.innerHTML = self.config.nextArrow;\n            buildMonths();\n            Object.defineProperty(self, \"_hidePrevMonthArrow\", {\n                get: function () { return self.__hidePrevMonthArrow; },\n                set: function (bool) {\n                    if (self.__hidePrevMonthArrow !== bool) {\n                        toggleClass(self.prevMonthNav, \"flatpickr-disabled\", bool);\n                        self.__hidePrevMonthArrow = bool;\n                    }\n                },\n            });\n            Object.defineProperty(self, \"_hideNextMonthArrow\", {\n                get: function () { return self.__hideNextMonthArrow; },\n                set: function (bool) {\n                    if (self.__hideNextMonthArrow !== bool) {\n                        toggleClass(self.nextMonthNav, \"flatpickr-disabled\", bool);\n                        self.__hideNextMonthArrow = bool;\n                    }\n                },\n            });\n            self.currentYearElement = self.yearElements[0];\n            updateNavigationCurrentMonth();\n            return self.monthNav;\n        }\n        function buildTime() {\n            self.calendarContainer.classList.add(\"hasTime\");\n            if (self.config.noCalendar)\n                self.calendarContainer.classList.add(\"noCalendar\");\n            self.timeContainer = createElement(\"div\", \"flatpickr-time\");\n            self.timeContainer.tabIndex = -1;\n            var separator = createElement(\"span\", \"flatpickr-time-separator\", \":\");\n            var hourInput = createNumberInput(\"flatpickr-hour\", {\n                \"aria-label\": self.l10n.hourAriaLabel,\n            });\n            self.hourElement = hourInput.getElementsByTagName(\"input\")[0];\n            var minuteInput = createNumberInput(\"flatpickr-minute\", {\n                \"aria-label\": self.l10n.minuteAriaLabel,\n            });\n            self.minuteElement = minuteInput.getElementsByTagName(\"input\")[0];\n            self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;\n            self.hourElement.value = pad(self.latestSelectedDateObj\n                ? self.latestSelectedDateObj.getHours()\n                : self.config.time_24hr\n                    ? self.config.defaultHour\n                    : military2ampm(self.config.defaultHour));\n            self.minuteElement.value = pad(self.latestSelectedDateObj\n                ? self.latestSelectedDateObj.getMinutes()\n                : self.config.defaultMinute);\n            self.hourElement.setAttribute(\"step\", self.config.hourIncrement.toString());\n            self.minuteElement.setAttribute(\"step\", self.config.minuteIncrement.toString());\n            self.hourElement.setAttribute(\"min\", self.config.time_24hr ? \"0\" : \"1\");\n            self.hourElement.setAttribute(\"max\", self.config.time_24hr ? \"23\" : \"12\");\n            self.minuteElement.setAttribute(\"min\", \"0\");\n            self.minuteElement.setAttribute(\"max\", \"59\");\n            self.timeContainer.appendChild(hourInput);\n            self.timeContainer.appendChild(separator);\n            self.timeContainer.appendChild(minuteInput);\n            if (self.config.time_24hr)\n                self.timeContainer.classList.add(\"time24hr\");\n            if (self.config.enableSeconds) {\n                self.timeContainer.classList.add(\"hasSeconds\");\n                var secondInput = createNumberInput(\"flatpickr-second\");\n                self.secondElement = secondInput.getElementsByTagName(\"input\")[0];\n                self.secondElement.value = pad(self.latestSelectedDateObj\n                    ? self.latestSelectedDateObj.getSeconds()\n                    : self.config.defaultSeconds);\n                self.secondElement.setAttribute(\"step\", self.minuteElement.getAttribute(\"step\"));\n                self.secondElement.setAttribute(\"min\", \"0\");\n                self.secondElement.setAttribute(\"max\", \"59\");\n                self.timeContainer.appendChild(createElement(\"span\", \"flatpickr-time-separator\", \":\"));\n                self.timeContainer.appendChild(secondInput);\n            }\n            if (!self.config.time_24hr) {\n                // add self.amPM if appropriate\n                self.amPM = createElement(\"span\", \"flatpickr-am-pm\", self.l10n.amPM[int((self.latestSelectedDateObj\n                    ? self.hourElement.value\n                    : self.config.defaultHour) > 11)]);\n                self.amPM.title = self.l10n.toggleTitle;\n                self.amPM.tabIndex = -1;\n                self.timeContainer.appendChild(self.amPM);\n            }\n            return self.timeContainer;\n        }\n        function buildWeekdays() {\n            if (!self.weekdayContainer)\n                self.weekdayContainer = createElement(\"div\", \"flatpickr-weekdays\");\n            else\n                clearNode(self.weekdayContainer);\n            for (var i = self.config.showMonths; i--;) {\n                var container = createElement(\"div\", \"flatpickr-weekdaycontainer\");\n                self.weekdayContainer.appendChild(container);\n            }\n            updateWeekdays();\n            return self.weekdayContainer;\n        }\n        function updateWeekdays() {\n            if (!self.weekdayContainer) {\n                return;\n            }\n            var firstDayOfWeek = self.l10n.firstDayOfWeek;\n            var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);\n            if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {\n                weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));\n            }\n            for (var i = self.config.showMonths; i--;) {\n                self.weekdayContainer.children[i].innerHTML = \"\\n      <span class='flatpickr-weekday'>\\n        \" + weekdays.join(\"</span><span class='flatpickr-weekday'>\") + \"\\n      </span>\\n      \";\n            }\n        }\n        /* istanbul ignore next */\n        function buildWeeks() {\n            self.calendarContainer.classList.add(\"hasWeeks\");\n            var weekWrapper = createElement(\"div\", \"flatpickr-weekwrapper\");\n            weekWrapper.appendChild(createElement(\"span\", \"flatpickr-weekday\", self.l10n.weekAbbreviation));\n            var weekNumbers = createElement(\"div\", \"flatpickr-weeks\");\n            weekWrapper.appendChild(weekNumbers);\n            return {\n                weekWrapper: weekWrapper,\n                weekNumbers: weekNumbers,\n            };\n        }\n        function changeMonth(value, isOffset) {\n            if (isOffset === void 0) { isOffset = true; }\n            var delta = isOffset ? value : value - self.currentMonth;\n            if ((delta < 0 && self._hidePrevMonthArrow === true) ||\n                (delta > 0 && self._hideNextMonthArrow === true))\n                return;\n            self.currentMonth += delta;\n            if (self.currentMonth < 0 || self.currentMonth > 11) {\n                self.currentYear += self.currentMonth > 11 ? 1 : -1;\n                self.currentMonth = (self.currentMonth + 12) % 12;\n                triggerEvent(\"onYearChange\");\n                buildMonthSwitch();\n            }\n            buildDays();\n            triggerEvent(\"onMonthChange\");\n            updateNavigationCurrentMonth();\n        }\n        function clear(triggerChangeEvent, toInitial) {\n            if (triggerChangeEvent === void 0) { triggerChangeEvent = true; }\n            if (toInitial === void 0) { toInitial = true; }\n            self.input.value = \"\";\n            if (self.altInput !== undefined)\n                self.altInput.value = \"\";\n            if (self.mobileInput !== undefined)\n                self.mobileInput.value = \"\";\n            self.selectedDates = [];\n            self.latestSelectedDateObj = undefined;\n            if (toInitial === true) {\n                self.currentYear = self._initialDate.getFullYear();\n                self.currentMonth = self._initialDate.getMonth();\n            }\n            if (self.config.enableTime === true) {\n                var _a = getDefaultHours(), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;\n                setHours(hours, minutes, seconds);\n            }\n            self.redraw();\n            if (triggerChangeEvent)\n                // triggerChangeEvent is true (default) or an Event\n                triggerEvent(\"onChange\");\n        }\n        function close() {\n            self.isOpen = false;\n            if (!self.isMobile) {\n                if (self.calendarContainer !== undefined) {\n                    self.calendarContainer.classList.remove(\"open\");\n                }\n                if (self._input !== undefined) {\n                    self._input.classList.remove(\"active\");\n                }\n            }\n            triggerEvent(\"onClose\");\n        }\n        function destroy() {\n            if (self.config !== undefined)\n                triggerEvent(\"onDestroy\");\n            for (var i = self._handlers.length; i--;) {\n                var h = self._handlers[i];\n                h.element.removeEventListener(h.event, h.handler, h.options);\n            }\n            self._handlers = [];\n            if (self.mobileInput) {\n                if (self.mobileInput.parentNode)\n                    self.mobileInput.parentNode.removeChild(self.mobileInput);\n                self.mobileInput = undefined;\n            }\n            else if (self.calendarContainer && self.calendarContainer.parentNode) {\n                if (self.config.static && self.calendarContainer.parentNode) {\n                    var wrapper = self.calendarContainer.parentNode;\n                    wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);\n                    if (wrapper.parentNode) {\n                        while (wrapper.firstChild)\n                            wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);\n                        wrapper.parentNode.removeChild(wrapper);\n                    }\n                }\n                else\n                    self.calendarContainer.parentNode.removeChild(self.calendarContainer);\n            }\n            if (self.altInput) {\n                self.input.type = \"text\";\n                if (self.altInput.parentNode)\n                    self.altInput.parentNode.removeChild(self.altInput);\n                delete self.altInput;\n            }\n            if (self.input) {\n                self.input.type = self.input._type;\n                self.input.classList.remove(\"flatpickr-input\");\n                self.input.removeAttribute(\"readonly\");\n            }\n            [\n                \"_showTimeInput\",\n                \"latestSelectedDateObj\",\n                \"_hideNextMonthArrow\",\n                \"_hidePrevMonthArrow\",\n                \"__hideNextMonthArrow\",\n                \"__hidePrevMonthArrow\",\n                \"isMobile\",\n                \"isOpen\",\n                \"selectedDateElem\",\n                \"minDateHasTime\",\n                \"maxDateHasTime\",\n                \"days\",\n                \"daysContainer\",\n                \"_input\",\n                \"_positionElement\",\n                \"innerContainer\",\n                \"rContainer\",\n                \"monthNav\",\n                \"todayDateElem\",\n                \"calendarContainer\",\n                \"weekdayContainer\",\n                \"prevMonthNav\",\n                \"nextMonthNav\",\n                \"monthsDropdownContainer\",\n                \"currentMonthElement\",\n                \"currentYearElement\",\n                \"navigationCurrentMonth\",\n                \"selectedDateElem\",\n                \"config\",\n            ].forEach(function (k) {\n                try {\n                    delete self[k];\n                }\n                catch (_) { }\n            });\n        }\n        function isCalendarElem(elem) {\n            if (self.config.appendTo && self.config.appendTo.contains(elem))\n                return true;\n            return self.calendarContainer.contains(elem);\n        }\n        function documentClick(e) {\n            if (self.isOpen && !self.config.inline) {\n                var eventTarget_1 = getEventTarget(e);\n                var isCalendarElement = isCalendarElem(eventTarget_1);\n                var isInput = eventTarget_1 === self.input ||\n                    eventTarget_1 === self.altInput ||\n                    self.element.contains(eventTarget_1) ||\n                    // web components\n                    // e.path is not present in all browsers. circumventing typechecks\n                    (e.path &&\n                        e.path.indexOf &&\n                        (~e.path.indexOf(self.input) ||\n                            ~e.path.indexOf(self.altInput)));\n                var lostFocus = e.type === \"blur\"\n                    ? isInput &&\n                        e.relatedTarget &&\n                        !isCalendarElem(e.relatedTarget)\n                    : !isInput &&\n                        !isCalendarElement &&\n                        !isCalendarElem(e.relatedTarget);\n                var isIgnored = !self.config.ignoredFocusElements.some(function (elem) {\n                    return elem.contains(eventTarget_1);\n                });\n                if (lostFocus && isIgnored) {\n                    if (self.timeContainer !== undefined &&\n                        self.minuteElement !== undefined &&\n                        self.hourElement !== undefined &&\n                        self.input.value !== \"\" &&\n                        self.input.value !== undefined) {\n                        updateTime();\n                    }\n                    self.close();\n                    if (self.config &&\n                        self.config.mode === \"range\" &&\n                        self.selectedDates.length === 1) {\n                        self.clear(false);\n                        self.redraw();\n                    }\n                }\n            }\n        }\n        function changeYear(newYear) {\n            if (!newYear ||\n                (self.config.minDate && newYear < self.config.minDate.getFullYear()) ||\n                (self.config.maxDate && newYear > self.config.maxDate.getFullYear()))\n                return;\n            var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;\n            self.currentYear = newYearNum || self.currentYear;\n            if (self.config.maxDate &&\n                self.currentYear === self.config.maxDate.getFullYear()) {\n                self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);\n            }\n            else if (self.config.minDate &&\n                self.currentYear === self.config.minDate.getFullYear()) {\n                self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);\n            }\n            if (isNewYear) {\n                self.redraw();\n                triggerEvent(\"onYearChange\");\n                buildMonthSwitch();\n            }\n        }\n        function isEnabled(date, timeless) {\n            if (timeless === void 0) { timeless = true; }\n            var dateToCheck = self.parseDate(date, undefined, timeless); // timeless\n            if ((self.config.minDate &&\n                dateToCheck &&\n                compareDates(dateToCheck, self.config.minDate, timeless !== undefined ? timeless : !self.minDateHasTime) < 0) ||\n                (self.config.maxDate &&\n                    dateToCheck &&\n                    compareDates(dateToCheck, self.config.maxDate, timeless !== undefined ? timeless : !self.maxDateHasTime) > 0))\n                return false;\n            if (self.config.enable.length === 0 && self.config.disable.length === 0)\n                return true;\n            if (dateToCheck === undefined)\n                return false;\n            var bool = self.config.enable.length > 0, array = bool ? self.config.enable : self.config.disable;\n            for (var i = 0, d = void 0; i < array.length; i++) {\n                d = array[i];\n                if (typeof d === \"function\" &&\n                    d(dateToCheck) // disabled by function\n                )\n                    return bool;\n                else if (d instanceof Date &&\n                    dateToCheck !== undefined &&\n                    d.getTime() === dateToCheck.getTime())\n                    // disabled by date\n                    return bool;\n                else if (typeof d === \"string\" && dateToCheck !== undefined) {\n                    // disabled by date string\n                    var parsed = self.parseDate(d, undefined, true);\n                    return parsed && parsed.getTime() === dateToCheck.getTime()\n                        ? bool\n                        : !bool;\n                }\n                else if (\n                // disabled by range\n                typeof d === \"object\" &&\n                    dateToCheck !== undefined &&\n                    d.from &&\n                    d.to &&\n                    dateToCheck.getTime() >= d.from.getTime() &&\n                    dateToCheck.getTime() <= d.to.getTime())\n                    return bool;\n            }\n            return !bool;\n        }\n        function isInView(elem) {\n            if (self.daysContainer !== undefined)\n                return (elem.className.indexOf(\"hidden\") === -1 &&\n                    elem.className.indexOf(\"flatpickr-disabled\") === -1 &&\n                    self.daysContainer.contains(elem));\n            return false;\n        }\n        function onBlur(e) {\n            var isInput = e.target === self._input;\n            if (isInput &&\n                !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {\n                self.setDate(self._input.value, true, e.target === self.altInput\n                    ? self.config.altFormat\n                    : self.config.dateFormat);\n            }\n        }\n        function onKeyDown(e) {\n            // e.key                      e.keyCode\n            // \"Backspace\"                        8\n            // \"Tab\"                              9\n            // \"Enter\"                           13\n            // \"Escape\"     (IE \"Esc\")           27\n            // \"ArrowLeft\"  (IE \"Left\")          37\n            // \"ArrowUp\"    (IE \"Up\")            38\n            // \"ArrowRight\" (IE \"Right\")         39\n            // \"ArrowDown\"  (IE \"Down\")          40\n            // \"Delete\"     (IE \"Del\")           46\n            var eventTarget = getEventTarget(e);\n            var isInput = self.config.wrap\n                ? element.contains(eventTarget)\n                : eventTarget === self._input;\n            var allowInput = self.config.allowInput;\n            var allowKeydown = self.isOpen && (!allowInput || !isInput);\n            var allowInlineKeydown = self.config.inline && isInput && !allowInput;\n            if (e.keyCode === 13 && isInput) {\n                if (allowInput) {\n                    self.setDate(self._input.value, true, eventTarget === self.altInput\n                        ? self.config.altFormat\n                        : self.config.dateFormat);\n                    return eventTarget.blur();\n                }\n                else {\n                    self.open();\n                }\n            }\n            else if (isCalendarElem(eventTarget) ||\n                allowKeydown ||\n                allowInlineKeydown) {\n                var isTimeObj = !!self.timeContainer &&\n                    self.timeContainer.contains(eventTarget);\n                switch (e.keyCode) {\n                    case 13:\n                        if (isTimeObj) {\n                            e.preventDefault();\n                            updateTime();\n                            focusAndClose();\n                        }\n                        else\n                            selectDate(e);\n                        break;\n                    case 27: // escape\n                        e.preventDefault();\n                        focusAndClose();\n                        break;\n                    case 8:\n                    case 46:\n                        if (isInput && !self.config.allowInput) {\n                            e.preventDefault();\n                            self.clear();\n                        }\n                        break;\n                    case 37:\n                    case 39:\n                        if (!isTimeObj && !isInput) {\n                            e.preventDefault();\n                            if (self.daysContainer !== undefined &&\n                                (allowInput === false ||\n                                    (document.activeElement && isInView(document.activeElement)))) {\n                                var delta_1 = e.keyCode === 39 ? 1 : -1;\n                                if (!e.ctrlKey)\n                                    focusOnDay(undefined, delta_1);\n                                else {\n                                    e.stopPropagation();\n                                    changeMonth(delta_1);\n                                    focusOnDay(getFirstAvailableDay(1), 0);\n                                }\n                            }\n                        }\n                        else if (self.hourElement)\n                            self.hourElement.focus();\n                        break;\n                    case 38:\n                    case 40:\n                        e.preventDefault();\n                        var delta = e.keyCode === 40 ? 1 : -1;\n                        if ((self.daysContainer &&\n                            eventTarget.$i !== undefined) ||\n                            eventTarget === self.input ||\n                            eventTarget === self.altInput) {\n                            if (e.ctrlKey) {\n                                e.stopPropagation();\n                                changeYear(self.currentYear - delta);\n                                focusOnDay(getFirstAvailableDay(1), 0);\n                            }\n                            else if (!isTimeObj)\n                                focusOnDay(undefined, delta * 7);\n                        }\n                        else if (eventTarget === self.currentYearElement) {\n                            changeYear(self.currentYear - delta);\n                        }\n                        else if (self.config.enableTime) {\n                            if (!isTimeObj && self.hourElement)\n                                self.hourElement.focus();\n                            updateTime(e);\n                            self._debouncedChange();\n                        }\n                        break;\n                    case 9:\n                        if (isTimeObj) {\n                            var elems = [\n                                self.hourElement,\n                                self.minuteElement,\n                                self.secondElement,\n                                self.amPM,\n                            ]\n                                .concat(self.pluginElements)\n                                .filter(function (x) { return x; });\n                            var i = elems.indexOf(eventTarget);\n                            if (i !== -1) {\n                                var target = elems[i + (e.shiftKey ? -1 : 1)];\n                                e.preventDefault();\n                                (target || self._input).focus();\n                            }\n                        }\n                        else if (!self.config.noCalendar &&\n                            self.daysContainer &&\n                            self.daysContainer.contains(eventTarget) &&\n                            e.shiftKey) {\n                            e.preventDefault();\n                            self._input.focus();\n                        }\n                        break;\n                }\n            }\n            if (self.amPM !== undefined && eventTarget === self.amPM) {\n                switch (e.key) {\n                    case self.l10n.amPM[0].charAt(0):\n                    case self.l10n.amPM[0].charAt(0).toLowerCase():\n                        self.amPM.textContent = self.l10n.amPM[0];\n                        setHoursFromInputs();\n                        updateValue();\n                        break;\n                    case self.l10n.amPM[1].charAt(0):\n                    case self.l10n.amPM[1].charAt(0).toLowerCase():\n                        self.amPM.textContent = self.l10n.amPM[1];\n                        setHoursFromInputs();\n                        updateValue();\n                        break;\n                }\n            }\n            if (isInput || isCalendarElem(eventTarget)) {\n                triggerEvent(\"onKeyDown\", e);\n            }\n        }\n        function onMouseOver(elem) {\n            if (self.selectedDates.length !== 1 ||\n                (elem &&\n                    (!elem.classList.contains(\"flatpickr-day\") ||\n                        elem.classList.contains(\"flatpickr-disabled\"))))\n                return;\n            var hoverDate = elem\n                ? elem.dateObj.getTime()\n                : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], undefined, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());\n            var containsDisabled = false;\n            var minRange = 0, maxRange = 0;\n            for (var t = rangeStartDate; t < rangeEndDate; t += duration.DAY) {\n                if (!isEnabled(new Date(t), true)) {\n                    containsDisabled =\n                        containsDisabled || (t > rangeStartDate && t < rangeEndDate);\n                    if (t < initialDate && (!minRange || t > minRange))\n                        minRange = t;\n                    else if (t > initialDate && (!maxRange || t < maxRange))\n                        maxRange = t;\n                }\n            }\n            for (var m = 0; m < self.config.showMonths; m++) {\n                var month = self.daysContainer.children[m];\n                var _loop_1 = function (i, l) {\n                    var dayElem = month.children[i], date = dayElem.dateObj;\n                    var timestamp = date.getTime();\n                    var outOfRange = (minRange > 0 && timestamp < minRange) ||\n                        (maxRange > 0 && timestamp > maxRange);\n                    if (outOfRange) {\n                        dayElem.classList.add(\"notAllowed\");\n                        [\"inRange\", \"startRange\", \"endRange\"].forEach(function (c) {\n                            dayElem.classList.remove(c);\n                        });\n                        return \"continue\";\n                    }\n                    else if (containsDisabled && !outOfRange)\n                        return \"continue\";\n                    [\"startRange\", \"inRange\", \"endRange\", \"notAllowed\"].forEach(function (c) {\n                        dayElem.classList.remove(c);\n                    });\n                    if (elem !== undefined) {\n                        elem.classList.add(hoverDate <= self.selectedDates[0].getTime()\n                            ? \"startRange\"\n                            : \"endRange\");\n                        if (initialDate < hoverDate && timestamp === initialDate)\n                            dayElem.classList.add(\"startRange\");\n                        else if (initialDate > hoverDate && timestamp === initialDate)\n                            dayElem.classList.add(\"endRange\");\n                        if (timestamp >= minRange &&\n                            (maxRange === 0 || timestamp <= maxRange) &&\n                            isBetween(timestamp, initialDate, hoverDate))\n                            dayElem.classList.add(\"inRange\");\n                    }\n                };\n                for (var i = 0, l = month.children.length; i < l; i++) {\n                    _loop_1(i, l);\n                }\n            }\n        }\n        function onResize() {\n            if (self.isOpen && !self.config.static && !self.config.inline)\n                positionCalendar();\n        }\n        function open(e, positionElement) {\n            if (positionElement === void 0) { positionElement = self._positionElement; }\n            if (self.isMobile === true) {\n                if (e) {\n                    e.preventDefault();\n                    var eventTarget = getEventTarget(e);\n                    eventTarget && eventTarget.blur();\n                }\n                if (self.mobileInput !== undefined) {\n                    self.mobileInput.focus();\n                    self.mobileInput.click();\n                }\n                triggerEvent(\"onOpen\");\n                return;\n            }\n            if (self._input.disabled || self.config.inline)\n                return;\n            var wasOpen = self.isOpen;\n            self.isOpen = true;\n            if (!wasOpen) {\n                self.calendarContainer.classList.add(\"open\");\n                self._input.classList.add(\"active\");\n                triggerEvent(\"onOpen\");\n                positionCalendar(positionElement);\n            }\n            if (self.config.enableTime === true && self.config.noCalendar === true) {\n                if (self.config.allowInput === false &&\n                    (e === undefined ||\n                        !self.timeContainer.contains(e.relatedTarget))) {\n                    setTimeout(function () { return self.hourElement.select(); }, 50);\n                }\n            }\n        }\n        function minMaxDateSetter(type) {\n            return function (date) {\n                var dateObj = (self.config[\"_\" + type + \"Date\"] = self.parseDate(date, self.config.dateFormat));\n                var inverseDateObj = self.config[\"_\" + (type === \"min\" ? \"max\" : \"min\") + \"Date\"];\n                if (dateObj !== undefined) {\n                    self[type === \"min\" ? \"minDateHasTime\" : \"maxDateHasTime\"] =\n                        dateObj.getHours() > 0 ||\n                            dateObj.getMinutes() > 0 ||\n                            dateObj.getSeconds() > 0;\n                }\n                if (self.selectedDates) {\n                    self.selectedDates = self.selectedDates.filter(function (d) { return isEnabled(d); });\n                    if (!self.selectedDates.length && type === \"min\")\n                        setHoursFromDate(dateObj);\n                    updateValue();\n                }\n                if (self.daysContainer) {\n                    redraw();\n                    if (dateObj !== undefined)\n                        self.currentYearElement[type] = dateObj.getFullYear().toString();\n                    else\n                        self.currentYearElement.removeAttribute(type);\n                    self.currentYearElement.disabled =\n                        !!inverseDateObj &&\n                            dateObj !== undefined &&\n                            inverseDateObj.getFullYear() === dateObj.getFullYear();\n                }\n            };\n        }\n        function parseConfig() {\n            var boolOpts = [\n                \"wrap\",\n                \"weekNumbers\",\n                \"allowInput\",\n                \"allowInvalidPreload\",\n                \"clickOpens\",\n                \"time_24hr\",\n                \"enableTime\",\n                \"noCalendar\",\n                \"altInput\",\n                \"shorthandCurrentMonth\",\n                \"inline\",\n                \"static\",\n                \"enableSeconds\",\n                \"disableMobile\",\n            ];\n            var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);\n            var formats = {};\n            self.config.parseDate = userConfig.parseDate;\n            self.config.formatDate = userConfig.formatDate;\n            Object.defineProperty(self.config, \"enable\", {\n                get: function () { return self.config._enable; },\n                set: function (dates) {\n                    self.config._enable = parseDateRules(dates);\n                },\n            });\n            Object.defineProperty(self.config, \"disable\", {\n                get: function () { return self.config._disable; },\n                set: function (dates) {\n                    self.config._disable = parseDateRules(dates);\n                },\n            });\n            var timeMode = userConfig.mode === \"time\";\n            if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {\n                var defaultDateFormat = flatpickr.defaultConfig.dateFormat || defaults.dateFormat;\n                formats.dateFormat =\n                    userConfig.noCalendar || timeMode\n                        ? \"H:i\" + (userConfig.enableSeconds ? \":S\" : \"\")\n                        : defaultDateFormat + \" H:i\" + (userConfig.enableSeconds ? \":S\" : \"\");\n            }\n            if (userConfig.altInput &&\n                (userConfig.enableTime || timeMode) &&\n                !userConfig.altFormat) {\n                var defaultAltFormat = flatpickr.defaultConfig.altFormat || defaults.altFormat;\n                formats.altFormat =\n                    userConfig.noCalendar || timeMode\n                        ? \"h:i\" + (userConfig.enableSeconds ? \":S K\" : \" K\")\n                        : defaultAltFormat + (\" h:i\" + (userConfig.enableSeconds ? \":S\" : \"\") + \" K\");\n            }\n            Object.defineProperty(self.config, \"minDate\", {\n                get: function () { return self.config._minDate; },\n                set: minMaxDateSetter(\"min\"),\n            });\n            Object.defineProperty(self.config, \"maxDate\", {\n                get: function () { return self.config._maxDate; },\n                set: minMaxDateSetter(\"max\"),\n            });\n            var minMaxTimeSetter = function (type) { return function (val) {\n                self.config[type === \"min\" ? \"_minTime\" : \"_maxTime\"] = self.parseDate(val, \"H:i:S\");\n            }; };\n            Object.defineProperty(self.config, \"minTime\", {\n                get: function () { return self.config._minTime; },\n                set: minMaxTimeSetter(\"min\"),\n            });\n            Object.defineProperty(self.config, \"maxTime\", {\n                get: function () { return self.config._maxTime; },\n                set: minMaxTimeSetter(\"max\"),\n            });\n            if (userConfig.mode === \"time\") {\n                self.config.noCalendar = true;\n                self.config.enableTime = true;\n            }\n            Object.assign(self.config, formats, userConfig);\n            for (var i = 0; i < boolOpts.length; i++)\n                // https://github.com/microsoft/TypeScript/issues/31663\n                self.config[boolOpts[i]] =\n                    self.config[boolOpts[i]] === true ||\n                        self.config[boolOpts[i]] === \"true\";\n            HOOKS.filter(function (hook) { return self.config[hook] !== undefined; }).forEach(function (hook) {\n                self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);\n            });\n            self.isMobile =\n                !self.config.disableMobile &&\n                    !self.config.inline &&\n                    self.config.mode === \"single\" &&\n                    !self.config.disable.length &&\n                    !self.config.enable.length &&\n                    !self.config.weekNumbers &&\n                    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n            for (var i = 0; i < self.config.plugins.length; i++) {\n                var pluginConf = self.config.plugins[i](self) || {};\n                for (var key in pluginConf) {\n                    if (HOOKS.indexOf(key) > -1) {\n                        self.config[key] = arrayify(pluginConf[key])\n                            .map(bindToInstance)\n                            .concat(self.config[key]);\n                    }\n                    else if (typeof userConfig[key] === \"undefined\")\n                        self.config[key] = pluginConf[key];\n                }\n            }\n            if (!userConfig.altInputClass) {\n                self.config.altInputClass =\n                    getInputElem().className + \" \" + self.config.altInputClass;\n            }\n            triggerEvent(\"onParseConfig\");\n        }\n        function getInputElem() {\n            return self.config.wrap\n                ? element.querySelector(\"[data-input]\")\n                : element;\n        }\n        function setupLocale() {\n            if (typeof self.config.locale !== \"object\" &&\n                typeof flatpickr.l10ns[self.config.locale] === \"undefined\")\n                self.config.errorHandler(new Error(\"flatpickr: invalid locale \" + self.config.locale));\n            self.l10n = __assign(__assign({}, flatpickr.l10ns.default), (typeof self.config.locale === \"object\"\n                ? self.config.locale\n                : self.config.locale !== \"default\"\n                    ? flatpickr.l10ns[self.config.locale]\n                    : undefined));\n            tokenRegex.K = \"(\" + self.l10n.amPM[0] + \"|\" + self.l10n.amPM[1] + \"|\" + self.l10n.amPM[0].toLowerCase() + \"|\" + self.l10n.amPM[1].toLowerCase() + \")\";\n            var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));\n            if (userConfig.time_24hr === undefined &&\n                flatpickr.defaultConfig.time_24hr === undefined) {\n                self.config.time_24hr = self.l10n.time_24hr;\n            }\n            self.formatDate = createDateFormatter(self);\n            self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n        }\n        function positionCalendar(customPositionElement) {\n            if (self.calendarContainer === undefined)\n                return;\n            triggerEvent(\"onPreCalendarPosition\");\n            var positionElement = customPositionElement || self._positionElement;\n            var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function (acc, child) { return acc + child.offsetHeight; }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(\" \"), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === \"above\" ||\n                (configPosVertical !== \"below\" &&\n                    distanceFromBottom < calendarHeight &&\n                    inputBounds.top > calendarHeight);\n            var top = window.pageYOffset +\n                inputBounds.top +\n                (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);\n            toggleClass(self.calendarContainer, \"arrowTop\", !showOnTop);\n            toggleClass(self.calendarContainer, \"arrowBottom\", showOnTop);\n            if (self.config.inline)\n                return;\n            var left = window.pageXOffset + inputBounds.left;\n            var isCenter = false;\n            var isRight = false;\n            if (configPosHorizontal === \"center\") {\n                left -= (calendarWidth - inputBounds.width) / 2;\n                isCenter = true;\n            }\n            else if (configPosHorizontal === \"right\") {\n                left -= calendarWidth - inputBounds.width;\n                isRight = true;\n            }\n            toggleClass(self.calendarContainer, \"arrowLeft\", !isCenter && !isRight);\n            toggleClass(self.calendarContainer, \"arrowCenter\", isCenter);\n            toggleClass(self.calendarContainer, \"arrowRight\", isRight);\n            var right = window.document.body.offsetWidth -\n                (window.pageXOffset + inputBounds.right);\n            var rightMost = left + calendarWidth > window.document.body.offsetWidth;\n            var centerMost = right + calendarWidth > window.document.body.offsetWidth;\n            toggleClass(self.calendarContainer, \"rightMost\", rightMost);\n            if (self.config.static)\n                return;\n            self.calendarContainer.style.top = top + \"px\";\n            if (!rightMost) {\n                self.calendarContainer.style.left = left + \"px\";\n                self.calendarContainer.style.right = \"auto\";\n            }\n            else if (!centerMost) {\n                self.calendarContainer.style.left = \"auto\";\n                self.calendarContainer.style.right = right + \"px\";\n            }\n            else {\n                var doc = getDocumentStyleSheet();\n                // some testing environments don't have css support\n                if (doc === undefined)\n                    return;\n                var bodyWidth = window.document.body.offsetWidth;\n                var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);\n                var centerBefore = \".flatpickr-calendar.centerMost:before\";\n                var centerAfter = \".flatpickr-calendar.centerMost:after\";\n                var centerIndex = doc.cssRules.length;\n                var centerStyle = \"{left:\" + inputBounds.left + \"px;right:auto;}\";\n                toggleClass(self.calendarContainer, \"rightMost\", false);\n                toggleClass(self.calendarContainer, \"centerMost\", true);\n                doc.insertRule(centerBefore + \",\" + centerAfter + centerStyle, centerIndex);\n                self.calendarContainer.style.left = centerLeft + \"px\";\n                self.calendarContainer.style.right = \"auto\";\n            }\n        }\n        function getDocumentStyleSheet() {\n            var editableSheet = null;\n            for (var i = 0; i < document.styleSheets.length; i++) {\n                var sheet = document.styleSheets[i];\n                try {\n                    sheet.cssRules;\n                }\n                catch (err) {\n                    continue;\n                }\n                editableSheet = sheet;\n                break;\n            }\n            return editableSheet != null ? editableSheet : createStyleSheet();\n        }\n        function createStyleSheet() {\n            var style = document.createElement(\"style\");\n            document.head.appendChild(style);\n            return style.sheet;\n        }\n        function redraw() {\n            if (self.config.noCalendar || self.isMobile)\n                return;\n            buildMonthSwitch();\n            updateNavigationCurrentMonth();\n            buildDays();\n        }\n        function focusAndClose() {\n            self._input.focus();\n            if (window.navigator.userAgent.indexOf(\"MSIE\") !== -1 ||\n                navigator.msMaxTouchPoints !== undefined) {\n                // hack - bugs in the way IE handles focus keeps the calendar open\n                setTimeout(self.close, 0);\n            }\n            else {\n                self.close();\n            }\n        }\n        function selectDate(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            var isSelectable = function (day) {\n                return day.classList &&\n                    day.classList.contains(\"flatpickr-day\") &&\n                    !day.classList.contains(\"flatpickr-disabled\") &&\n                    !day.classList.contains(\"notAllowed\");\n            };\n            var t = findParent(getEventTarget(e), isSelectable);\n            if (t === undefined)\n                return;\n            var target = t;\n            var selectedDate = (self.latestSelectedDateObj = new Date(target.dateObj.getTime()));\n            var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth ||\n                selectedDate.getMonth() >\n                    self.currentMonth + self.config.showMonths - 1) &&\n                self.config.mode !== \"range\";\n            self.selectedDateElem = target;\n            if (self.config.mode === \"single\")\n                self.selectedDates = [selectedDate];\n            else if (self.config.mode === \"multiple\") {\n                var selectedIndex = isDateSelected(selectedDate);\n                if (selectedIndex)\n                    self.selectedDates.splice(parseInt(selectedIndex), 1);\n                else\n                    self.selectedDates.push(selectedDate);\n            }\n            else if (self.config.mode === \"range\") {\n                if (self.selectedDates.length === 2) {\n                    self.clear(false, false);\n                }\n                self.latestSelectedDateObj = selectedDate;\n                self.selectedDates.push(selectedDate);\n                // unless selecting same date twice, sort ascendingly\n                if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)\n                    self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n            }\n            setHoursFromInputs();\n            if (shouldChangeMonth) {\n                var isNewYear = self.currentYear !== selectedDate.getFullYear();\n                self.currentYear = selectedDate.getFullYear();\n                self.currentMonth = selectedDate.getMonth();\n                if (isNewYear) {\n                    triggerEvent(\"onYearChange\");\n                    buildMonthSwitch();\n                }\n                triggerEvent(\"onMonthChange\");\n            }\n            updateNavigationCurrentMonth();\n            buildDays();\n            updateValue();\n            // maintain focus\n            if (!shouldChangeMonth &&\n                self.config.mode !== \"range\" &&\n                self.config.showMonths === 1)\n                focusOnDayElem(target);\n            else if (self.selectedDateElem !== undefined &&\n                self.hourElement === undefined) {\n                self.selectedDateElem && self.selectedDateElem.focus();\n            }\n            if (self.hourElement !== undefined)\n                self.hourElement !== undefined && self.hourElement.focus();\n            if (self.config.closeOnSelect) {\n                var single = self.config.mode === \"single\" && !self.config.enableTime;\n                var range = self.config.mode === \"range\" &&\n                    self.selectedDates.length === 2 &&\n                    !self.config.enableTime;\n                if (single || range) {\n                    focusAndClose();\n                }\n            }\n            triggerChange();\n        }\n        var CALLBACKS = {\n            locale: [setupLocale, updateWeekdays],\n            showMonths: [buildMonths, setCalendarWidth, buildWeekdays],\n            minDate: [jumpToDate],\n            maxDate: [jumpToDate],\n        };\n        function set(option, value) {\n            if (option !== null && typeof option === \"object\") {\n                Object.assign(self.config, option);\n                for (var key in option) {\n                    if (CALLBACKS[key] !== undefined)\n                        CALLBACKS[key].forEach(function (x) { return x(); });\n                }\n            }\n            else {\n                self.config[option] = value;\n                if (CALLBACKS[option] !== undefined)\n                    CALLBACKS[option].forEach(function (x) { return x(); });\n                else if (HOOKS.indexOf(option) > -1)\n                    self.config[option] = arrayify(value);\n            }\n            self.redraw();\n            updateValue(true);\n        }\n        function setSelectedDate(inputDate, format) {\n            var dates = [];\n            if (inputDate instanceof Array)\n                dates = inputDate.map(function (d) { return self.parseDate(d, format); });\n            else if (inputDate instanceof Date || typeof inputDate === \"number\")\n                dates = [self.parseDate(inputDate, format)];\n            else if (typeof inputDate === \"string\") {\n                switch (self.config.mode) {\n                    case \"single\":\n                    case \"time\":\n                        dates = [self.parseDate(inputDate, format)];\n                        break;\n                    case \"multiple\":\n                        dates = inputDate\n                            .split(self.config.conjunction)\n                            .map(function (date) { return self.parseDate(date, format); });\n                        break;\n                    case \"range\":\n                        dates = inputDate\n                            .split(self.l10n.rangeSeparator)\n                            .map(function (date) { return self.parseDate(date, format); });\n                        break;\n                }\n            }\n            else\n                self.config.errorHandler(new Error(\"Invalid date supplied: \" + JSON.stringify(inputDate)));\n            self.selectedDates = (self.config.allowInvalidPreload\n                ? dates\n                : dates.filter(function (d) { return d instanceof Date && isEnabled(d, false); }));\n            if (self.config.mode === \"range\")\n                self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        }\n        function setDate(date, triggerChange, format) {\n            if (triggerChange === void 0) { triggerChange = false; }\n            if (format === void 0) { format = self.config.dateFormat; }\n            if ((date !== 0 && !date) || (date instanceof Array && date.length === 0))\n                return self.clear(triggerChange);\n            setSelectedDate(date, format);\n            self.latestSelectedDateObj =\n                self.selectedDates[self.selectedDates.length - 1];\n            self.redraw();\n            jumpToDate(undefined, triggerChange);\n            setHoursFromDate();\n            if (self.selectedDates.length === 0) {\n                self.clear(false);\n            }\n            updateValue(triggerChange);\n            if (triggerChange)\n                triggerEvent(\"onChange\");\n        }\n        function parseDateRules(arr) {\n            return arr\n                .slice()\n                .map(function (rule) {\n                if (typeof rule === \"string\" ||\n                    typeof rule === \"number\" ||\n                    rule instanceof Date) {\n                    return self.parseDate(rule, undefined, true);\n                }\n                else if (rule &&\n                    typeof rule === \"object\" &&\n                    rule.from &&\n                    rule.to)\n                    return {\n                        from: self.parseDate(rule.from, undefined),\n                        to: self.parseDate(rule.to, undefined),\n                    };\n                return rule;\n            })\n                .filter(function (x) { return x; }); // remove falsy values\n        }\n        function setupDates() {\n            self.selectedDates = [];\n            self.now = self.parseDate(self.config.now) || new Date();\n            // Workaround IE11 setting placeholder as the input's value\n            var preloadedDate = self.config.defaultDate ||\n                ((self.input.nodeName === \"INPUT\" ||\n                    self.input.nodeName === \"TEXTAREA\") &&\n                    self.input.placeholder &&\n                    self.input.value === self.input.placeholder\n                    ? null\n                    : self.input.value);\n            if (preloadedDate)\n                setSelectedDate(preloadedDate, self.config.dateFormat);\n            self._initialDate =\n                self.selectedDates.length > 0\n                    ? self.selectedDates[0]\n                    : self.config.minDate &&\n                        self.config.minDate.getTime() > self.now.getTime()\n                        ? self.config.minDate\n                        : self.config.maxDate &&\n                            self.config.maxDate.getTime() < self.now.getTime()\n                            ? self.config.maxDate\n                            : self.now;\n            self.currentYear = self._initialDate.getFullYear();\n            self.currentMonth = self._initialDate.getMonth();\n            if (self.selectedDates.length > 0)\n                self.latestSelectedDateObj = self.selectedDates[0];\n            if (self.config.minTime !== undefined)\n                self.config.minTime = self.parseDate(self.config.minTime, \"H:i\");\n            if (self.config.maxTime !== undefined)\n                self.config.maxTime = self.parseDate(self.config.maxTime, \"H:i\");\n            self.minDateHasTime =\n                !!self.config.minDate &&\n                    (self.config.minDate.getHours() > 0 ||\n                        self.config.minDate.getMinutes() > 0 ||\n                        self.config.minDate.getSeconds() > 0);\n            self.maxDateHasTime =\n                !!self.config.maxDate &&\n                    (self.config.maxDate.getHours() > 0 ||\n                        self.config.maxDate.getMinutes() > 0 ||\n                        self.config.maxDate.getSeconds() > 0);\n        }\n        function setupInputs() {\n            self.input = getInputElem();\n            /* istanbul ignore next */\n            if (!self.input) {\n                self.config.errorHandler(new Error(\"Invalid input element specified\"));\n                return;\n            }\n            // hack: store previous type to restore it after destroy()\n            self.input._type = self.input.type;\n            self.input.type = \"text\";\n            self.input.classList.add(\"flatpickr-input\");\n            self._input = self.input;\n            if (self.config.altInput) {\n                // replicate self.element\n                self.altInput = createElement(self.input.nodeName, self.config.altInputClass);\n                self._input = self.altInput;\n                self.altInput.placeholder = self.input.placeholder;\n                self.altInput.disabled = self.input.disabled;\n                self.altInput.required = self.input.required;\n                self.altInput.tabIndex = self.input.tabIndex;\n                self.altInput.type = \"text\";\n                self.input.setAttribute(\"type\", \"hidden\");\n                if (!self.config.static && self.input.parentNode)\n                    self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);\n            }\n            if (!self.config.allowInput)\n                self._input.setAttribute(\"readonly\", \"readonly\");\n            self._positionElement = self.config.positionElement || self._input;\n        }\n        function setupMobile() {\n            var inputType = self.config.enableTime\n                ? self.config.noCalendar\n                    ? \"time\"\n                    : \"datetime-local\"\n                : \"date\";\n            self.mobileInput = createElement(\"input\", self.input.className + \" flatpickr-mobile\");\n            self.mobileInput.tabIndex = 1;\n            self.mobileInput.type = inputType;\n            self.mobileInput.disabled = self.input.disabled;\n            self.mobileInput.required = self.input.required;\n            self.mobileInput.placeholder = self.input.placeholder;\n            self.mobileFormatStr =\n                inputType === \"datetime-local\"\n                    ? \"Y-m-d\\\\TH:i:S\"\n                    : inputType === \"date\"\n                        ? \"Y-m-d\"\n                        : \"H:i:S\";\n            if (self.selectedDates.length > 0) {\n                self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);\n            }\n            if (self.config.minDate)\n                self.mobileInput.min = self.formatDate(self.config.minDate, \"Y-m-d\");\n            if (self.config.maxDate)\n                self.mobileInput.max = self.formatDate(self.config.maxDate, \"Y-m-d\");\n            if (self.input.getAttribute(\"step\"))\n                self.mobileInput.step = String(self.input.getAttribute(\"step\"));\n            self.input.type = \"hidden\";\n            if (self.altInput !== undefined)\n                self.altInput.type = \"hidden\";\n            try {\n                if (self.input.parentNode)\n                    self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);\n            }\n            catch (_a) { }\n            bind(self.mobileInput, \"change\", function (e) {\n                self.setDate(getEventTarget(e).value, false, self.mobileFormatStr);\n                triggerEvent(\"onChange\");\n                triggerEvent(\"onClose\");\n            });\n        }\n        function toggle(e) {\n            if (self.isOpen === true)\n                return self.close();\n            self.open(e);\n        }\n        function triggerEvent(event, data) {\n            // If the instance has been destroyed already, all hooks have been removed\n            if (self.config === undefined)\n                return;\n            var hooks = self.config[event];\n            if (hooks !== undefined && hooks.length > 0) {\n                for (var i = 0; hooks[i] && i < hooks.length; i++)\n                    hooks[i](self.selectedDates, self.input.value, self, data);\n            }\n            if (event === \"onChange\") {\n                self.input.dispatchEvent(createEvent(\"change\"));\n                // many front-end frameworks bind to the input event\n                self.input.dispatchEvent(createEvent(\"input\"));\n            }\n        }\n        function createEvent(name) {\n            var e = document.createEvent(\"Event\");\n            e.initEvent(name, true, true);\n            return e;\n        }\n        function isDateSelected(date) {\n            for (var i = 0; i < self.selectedDates.length; i++) {\n                if (compareDates(self.selectedDates[i], date) === 0)\n                    return \"\" + i;\n            }\n            return false;\n        }\n        function isDateInRange(date) {\n            if (self.config.mode !== \"range\" || self.selectedDates.length < 2)\n                return false;\n            return (compareDates(date, self.selectedDates[0]) >= 0 &&\n                compareDates(date, self.selectedDates[1]) <= 0);\n        }\n        function updateNavigationCurrentMonth() {\n            if (self.config.noCalendar || self.isMobile || !self.monthNav)\n                return;\n            self.yearElements.forEach(function (yearElement, i) {\n                var d = new Date(self.currentYear, self.currentMonth, 1);\n                d.setMonth(self.currentMonth + i);\n                if (self.config.showMonths > 1 ||\n                    self.config.monthSelectorType === \"static\") {\n                    self.monthElements[i].textContent =\n                        monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + \" \";\n                }\n                else {\n                    self.monthsDropdownContainer.value = d.getMonth().toString();\n                }\n                yearElement.value = d.getFullYear().toString();\n            });\n            self._hidePrevMonthArrow =\n                self.config.minDate !== undefined &&\n                    (self.currentYear === self.config.minDate.getFullYear()\n                        ? self.currentMonth <= self.config.minDate.getMonth()\n                        : self.currentYear < self.config.minDate.getFullYear());\n            self._hideNextMonthArrow =\n                self.config.maxDate !== undefined &&\n                    (self.currentYear === self.config.maxDate.getFullYear()\n                        ? self.currentMonth + 1 > self.config.maxDate.getMonth()\n                        : self.currentYear > self.config.maxDate.getFullYear());\n        }\n        function getDateStr(format) {\n            return self.selectedDates\n                .map(function (dObj) { return self.formatDate(dObj, format); })\n                .filter(function (d, i, arr) {\n                return self.config.mode !== \"range\" ||\n                    self.config.enableTime ||\n                    arr.indexOf(d) === i;\n            })\n                .join(self.config.mode !== \"range\"\n                ? self.config.conjunction\n                : self.l10n.rangeSeparator);\n        }\n        /**\n         * Updates the values of inputs associated with the calendar\n         */\n        function updateValue(triggerChange) {\n            if (triggerChange === void 0) { triggerChange = true; }\n            if (self.mobileInput !== undefined && self.mobileFormatStr) {\n                self.mobileInput.value =\n                    self.latestSelectedDateObj !== undefined\n                        ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr)\n                        : \"\";\n            }\n            self.input.value = getDateStr(self.config.dateFormat);\n            if (self.altInput !== undefined) {\n                self.altInput.value = getDateStr(self.config.altFormat);\n            }\n            if (triggerChange !== false)\n                triggerEvent(\"onValueUpdate\");\n        }\n        function onMonthNavClick(e) {\n            var eventTarget = getEventTarget(e);\n            var isPrevMonth = self.prevMonthNav.contains(eventTarget);\n            var isNextMonth = self.nextMonthNav.contains(eventTarget);\n            if (isPrevMonth || isNextMonth) {\n                changeMonth(isPrevMonth ? -1 : 1);\n            }\n            else if (self.yearElements.indexOf(eventTarget) >= 0) {\n                eventTarget.select();\n            }\n            else if (eventTarget.classList.contains(\"arrowUp\")) {\n                self.changeYear(self.currentYear + 1);\n            }\n            else if (eventTarget.classList.contains(\"arrowDown\")) {\n                self.changeYear(self.currentYear - 1);\n            }\n        }\n        function timeWrapper(e) {\n            e.preventDefault();\n            var isKeyDown = e.type === \"keydown\", eventTarget = getEventTarget(e), input = eventTarget;\n            if (self.amPM !== undefined && eventTarget === self.amPM) {\n                self.amPM.textContent =\n                    self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n            }\n            var min = parseFloat(input.getAttribute(\"min\")), max = parseFloat(input.getAttribute(\"max\")), step = parseFloat(input.getAttribute(\"step\")), curValue = parseInt(input.value, 10), delta = e.delta ||\n                (isKeyDown ? (e.which === 38 ? 1 : -1) : 0);\n            var newValue = curValue + step * delta;\n            if (typeof input.value !== \"undefined\" && input.value.length === 2) {\n                var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;\n                if (newValue < min) {\n                    newValue =\n                        max +\n                            newValue +\n                            int(!isHourElem) +\n                            (int(isHourElem) && int(!self.amPM));\n                    if (isMinuteElem)\n                        incrementNumInput(undefined, -1, self.hourElement);\n                }\n                else if (newValue > max) {\n                    newValue =\n                        input === self.hourElement ? newValue - max - int(!self.amPM) : min;\n                    if (isMinuteElem)\n                        incrementNumInput(undefined, 1, self.hourElement);\n                }\n                if (self.amPM &&\n                    isHourElem &&\n                    (step === 1\n                        ? newValue + curValue === 23\n                        : Math.abs(newValue - curValue) > step)) {\n                    self.amPM.textContent =\n                        self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n                }\n                input.value = pad(newValue);\n            }\n        }\n        init();\n        return self;\n    }\n    /* istanbul ignore next */\n    function _flatpickr(nodeList, config) {\n        // static list\n        var nodes = Array.prototype.slice\n            .call(nodeList)\n            .filter(function (x) { return x instanceof HTMLElement; });\n        var instances = [];\n        for (var i = 0; i < nodes.length; i++) {\n            var node = nodes[i];\n            try {\n                if (node.getAttribute(\"data-fp-omit\") !== null)\n                    continue;\n                if (node._flatpickr !== undefined) {\n                    node._flatpickr.destroy();\n                    node._flatpickr = undefined;\n                }\n                node._flatpickr = FlatpickrInstance(node, config || {});\n                instances.push(node._flatpickr);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        }\n        return instances.length === 1 ? instances[0] : instances;\n    }\n    /* istanbul ignore next */\n    if (typeof HTMLElement !== \"undefined\" &&\n        typeof HTMLCollection !== \"undefined\" &&\n        typeof NodeList !== \"undefined\") {\n        // browser env\n        HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function (config) {\n            return _flatpickr(this, config);\n        };\n        HTMLElement.prototype.flatpickr = function (config) {\n            return _flatpickr([this], config);\n        };\n    }\n    /* istanbul ignore next */\n    var flatpickr = function (selector, config) {\n        if (typeof selector === \"string\") {\n            return _flatpickr(window.document.querySelectorAll(selector), config);\n        }\n        else if (selector instanceof Node) {\n            return _flatpickr([selector], config);\n        }\n        else {\n            return _flatpickr(selector, config);\n        }\n    };\n    /* istanbul ignore next */\n    flatpickr.defaultConfig = {};\n    flatpickr.l10ns = {\n        en: __assign({}, english),\n        default: __assign({}, english),\n    };\n    flatpickr.localize = function (l10n) {\n        flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);\n    };\n    flatpickr.setDefaults = function (config) {\n        flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);\n    };\n    flatpickr.parseDate = createDateParser({});\n    flatpickr.formatDate = createDateFormatter({});\n    flatpickr.compareDates = compareDates;\n    /* istanbul ignore next */\n    if (typeof jQuery !== \"undefined\" && typeof jQuery.fn !== \"undefined\") {\n        jQuery.fn.flatpickr = function (config) {\n            return _flatpickr(this, config);\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    Date.prototype.fp_incr = function (days) {\n        return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === \"string\" ? parseInt(days, 10) : days));\n    };\n    if (typeof window !== \"undefined\") {\n        window.flatpickr = flatpickr;\n    }\n\n    return flatpickr;\n\n})));\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = global || self, factory(global.sr = {}));\n}(this, (function (exports) { 'use strict';\n\n  var fp = typeof window !== \"undefined\" && window.flatpickr !== undefined\n      ? window.flatpickr\n      : {\n          l10ns: {},\n      };\n  var Serbian = {\n      weekdays: {\n          shorthand: [\"Ned\", \"Pon\", \"Uto\", \"Sre\", \"et\", \"Pet\", \"Sub\"],\n          longhand: [\n              \"Nedelja\",\n              \"Ponedeljak\",\n              \"Utorak\",\n              \"Sreda\",\n              \"etvrtak\",\n              \"Petak\",\n              \"Subota\",\n          ],\n      },\n      months: {\n          shorthand: [\n              \"Jan\",\n              \"Feb\",\n              \"Mar\",\n              \"Apr\",\n              \"Maj\",\n              \"Jun\",\n              \"Jul\",\n              \"Avg\",\n              \"Sep\",\n              \"Okt\",\n              \"Nov\",\n              \"Dec\",\n          ],\n          longhand: [\n              \"Januar\",\n              \"Februar\",\n              \"Mart\",\n              \"April\",\n              \"Maj\",\n              \"Jun\",\n              \"Jul\",\n              \"Avgust\",\n              \"Septembar\",\n              \"Oktobar\",\n              \"Novembar\",\n              \"Decembar\",\n          ],\n      },\n      firstDayOfWeek: 1,\n      weekAbbreviation: \"Ned.\",\n      rangeSeparator: \" do \",\n      time_24hr: true,\n  };\n  fp.l10ns.sr = Serbian;\n  var sr = fp.l10ns;\n\n  exports.Serbian = Serbian;\n  exports.default = sr;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","/*\nadd description for this class\n*/\nmodule.exports = class NewElement {\n  constructor(grandParent, parentElement, parentClass=['form-group'],titleElement,titleClass=['form-text'], titleText, inputClass, inputPlaceholder,inputName, inputPattern) {\n    this.grandParent = grandParent,\n    this.parentElement = parentElement,\n    this.parentClass= parentClass,\n    this.titleElement = titleElement,\n    this.titleClass= titleClass,\n    this.titleText = titleText,\n    this.inputClass = inputClass,\n    this.inputPlaceholder = inputPlaceholder,\n    this.inputName = inputName,\n    this.inputPattern = inputPattern\n  }\n  addElement() {\n    // add parent div\n    let newParentElement = document.createElement(this.parentElement)\n    newParentElement.className += this.parentClass\n\n    // create title and append it to parent div\n    let elementTitle = document.createElement(this.titleElement)\n    elementTitle.className += this.titleClass\n    let elementTitleText = document.createTextNode(this.titleText)\n    elementTitle.appendChild(elementTitleText)\n\n    // create remove icon\n    let removeField = document.createElement('span')\n    removeField.className += 'float-right removeField'\n    let removeFieldIcon = document.createTextNode('-')\n    removeField.appendChild(removeFieldIcon)\n\n    // adding remove icon to title element\n    newParentElement.appendChild(removeField)\n    // append title tag to parent div\n    newParentElement.appendChild(elementTitle)\n\n    // create input field and add class, placeholder and name values\n    let newInputField = document.createElement('input')\n    newInputField.className += this.inputClass\n    newInputField.placeholder = this.inputPlaceholder\n    newInputField.name= this.inputName\n    newInputField.pattern = this.inputPattern\n\n    // add input field to parent\n    newParentElement.appendChild(newInputField)\n\n    // append everything to grand parent\n    let grandParent = document.querySelector(this.grandParent)\n    grandParent.appendChild(newParentElement)\n    // grandParent.insertBefore(newParentElement, grandParent.childNodes[this.insertBefore])\n\n    // set focus to last created element\n    newInputField.focus()\n  }\n  removeElement(elementName) {\n    let elementToBeRemoved = document.querySelectorAll(elementName)\n    elementToBeRemoved.forEach((item) => {\n      item.addEventListener('click', (e) => {\n        item.parentNode.remove()\n      })\n    })\n  }\n}\n","exports.removeElement = (element1,element2) => {\n  element1.addEventListener('click', (e) => {\n    e.preventDefault()\n    let itemToRemove = e.target.innerText\n    let index = element2.indexOf(itemToRemove)\n    element2.splice(index,1)\n    if(element1.children.length === 1) {\n      e.target.remove()\n      element1.remove()\n    } else {\n      e.target.remove() }\n  })\n}\n\nexports.deleteDocument = (selector,message,url,redirect,error) => {\n  let deleteDocument = document.querySelectorAll(selector)\n    deleteDocument.forEach((item) => {\n      item.addEventListener('click', (e) => {\n        if(confirm(message))  {\n          let id = e.target.getAttribute('data-id')\n          url += id\n          fetch (url, {\n            method: 'delete'\n          }).then((response) => {\n            response.json()\n            .then((data) => {\n              console.log(data)\n            })\n            window.location.href=redirect\n          }).catch((e) => {\n            alert(error)\n          })\n        } else {\n          window.location.href=redirect\n        }\n      })\n    })\n}\n\nexports.renderAnalysisResult = (analysis, prices, resultDiv, itemsArray) => {\n\n  //check if analysis is already in localstorage\n  let analysisPositionArr = itemsArray.findIndex((item) => {\n\n    return item.name === prices[i].name\n  })\n\n  let tr = document.createElement('tr')\n  //td analysis name and preview icon\n  let tdName = document.createElement('td')\n  let analysisName = document.createTextNode(prices[i].name)\n\n  let analysisLink = document.createElement('a')\n      analysisLink.setAttribute('href', '/results/analysis/'+prices[i].slug)\n      analysisLink.className = 'nolink'\n      analysisLink.appendChild(analysisName)\n\n  let previewIcon = document.createElement('img')\n    previewIcon.setAttribute('src', '/images/detail.svg')\n    previewIcon.setAttribute('title', prices[i].preview)\n    previewIcon.className = \"tooltipImg mr-2\"\n    previewIcon.setAttribute('data-toggle', 'tooltip')\n  tdName.appendChild(previewIcon)\n  tdName.appendChild(analysisLink)\n  tr.appendChild(tdName)\n\n  // displab analysis abbreviation\n  // let abbr = document.createElement('td')\n  // let abbrName\n  //\n  // for(y=0; y<prices[i].abbr.length; y++) {\n  //   abbrName = document.createTextNode(prices[i].abbr[y].join(', '))\n  //   abbr.appendChild(abbrName)\n  //   tr.appendChild(abbr)\n  // }\n\n  //display alternative name for analysis\n  let alt = document.createElement('td')\n  let altName\n\n  for(y=0; y<prices[i].alt.length; y++) {\n    console.log(prices[i].alt[y].join(', '))\n     altName = document.createTextNode((prices[i].alt[y]).join(', '))\n    alt.appendChild(altName)\n    tr.appendChild(alt)\n  }\n\n  //display analysis groupName\n  let tdGroupName = document.createElement('td')\n    let groupName = document.createTextNode(prices[i].groupName)\n    tdGroupName.appendChild(groupName)\n    tr.appendChild(tdGroupName)\n\n  //display hospital icon if analysis is available\n  //ako nije dostupna stavi hospital-alt-off.svg\n\n  let hospital = document.createElement('td')\n  let hospitalIcon = document.createElement('img')\n    if(prices[i].availableHC) {\n      hospitalIcon.setAttribute('src', '/images/hospital-alt.svg')\n      hospitalIcon.setAttribute('data-toggle', 'tooltip')\n      hospitalIcon.setAttribute('title', 'Analizu je mogue uraditi u domu zdravlja o troku zdravstvenog osiguranja.')\n    } else {\n      hospitalIcon.setAttribute('src', '/images/hospital-alt_off.svg')\n      hospitalIcon.setAttribute('data-toggle', 'tooltip')\n      hospitalIcon.setAttribute('title', 'Analizu nije mogue uraditi u domu zdravlja o troku zdravstvenog osiguranja.')\n    }\n  hospital.appendChild(hospitalIcon)\n  tr.appendChild(hospital)\n\n  //display min and max price\n  let minmaxPrice = document.createElement('td')\n  let priceSpan = document.createElement('span')\n    priceSpan.className = 'font-weight-bold'\n\n      // let priceRange = document.createTextNode(`${pricesMin[i][0].cenovnik[0].cena} - ${pricesMax[i][0].cenovnik[0].cena}`)\n      let priceRange = document.createTextNode(`${prices[i].minPrice} - ${prices[i].maxPrice}`)\n      priceSpan.appendChild(priceRange)\n      minmaxPrice.appendChild(priceSpan)\n      tr.appendChild(minmaxPrice)\n\n  //create btn for adding analysis to basket\n  let addAnalysisBtnTd = document.createElement('td')\n  let addAnalysisBtn = document.createElement('button')\n  let addAnalysisBtnText\n\n  if(analysisPositionArr === -1) {\n    addAnalysisBtn.className = 'btn btn-outline-success float-right btn-block text-uppercase addAnalysis'\n    addAnalysisBtnText = document.createTextNode('dodaj')\n  } else {\n    addAnalysisBtnText = document.createTextNode(\"\\u2714\")\n    addAnalysisBtn.className = 'btn btn-outline-success float-right btn-block text-uppercase deleteAnalysis'\n    addAnalysisBtn.disabled = true\n  }\n    addAnalysisBtn.setAttribute('data-analysisId', prices[i]._id)\n    addAnalysisBtn.setAttribute('data-analysisName', prices[i].name)\n    addAnalysisBtn.setAttribute('data-groupImg', prices[i].iconPath)\n\n  addAnalysisBtn.appendChild(addAnalysisBtnText)\n  addAnalysisBtnTd.appendChild(addAnalysisBtn)\n  tr.appendChild(addAnalysisBtnTd)\n  resultDiv.appendChild(tr)\n}\n\nexports.displayBasket = (itemsArray) => {\n  // display 'shopping' basket\n  document.querySelector('.card').classList.remove('d-none')\n\n  //put number of selected analyisis next to basket title\n  let basketTitle = document.createTextNode(` (${itemsArray.length})`)\n  let cardHeader = document.getElementById('numOfAnalysis')\n    cardHeader.appendChild( basketTitle )\n\n// const data = JSON.parse(localStorage.getItem('items'))\n  itemsArray.forEach(analysis => {\n    //create li element for each analysis selected\n    let analysisAdded = document.createElement('li')\n      analysisAdded.className='list-group-item list-group-item-action'\n    //creating group image\n    let groupImage = document.createElement('img')\n      groupImage.classList = 'labGroupIconSelectedAnalysis'\n      groupImage.setAttribute('src', '/images/'+analysis.logo)\n    //creating text with analysis name\n    let analysisName = document.createTextNode(analysis.name)\n    let analysisLink = document.createElement('a')\n    let slug = analysis.name.split(' ')\n    let urlSlug = slug.join('-')\n      analysisLink.setAttribute('href', '/results/analysis/'+urlSlug)\n      analysisLink.className = 'nolink analysisBasketLiItem'\n      // analysisLink.setAttribute('target', '_blank')\n    analysisLink.appendChild(analysisName)\n    //creating span element for remove icon\n    let removeSpan = document.createElement('span')\n      removeSpan.className = 'float-right remove'\n    let removeImg = document.createElement('img')\n      removeImg.setAttribute('src','/images/closeBtn.svg')\n      removeImg.className = 'remove-analysis-from-basket'\n      removeSpan.appendChild(removeImg)\n      analysisAdded.appendChild(groupImage)\n      analysisAdded.appendChild(analysisLink)\n      analysisAdded.appendChild(removeSpan)\n      let selectedAnalysis = document.getElementById('selectedAnalysis')\n      //get position of analysis in array\n      let analysisPositionArr = itemsArray.findIndex((items) => {\n        return analysis.name === items.name\n      })\n      selectedAnalysis.insertBefore(analysisAdded, selectedAnalysis.childNodes[analysisPositionArr])\n  })\n}\n\nexports.removeAnalysis = (itemsArray, checkout) => {\n  //remove analysis from local storage\n  let analysisBasket = document.getElementById('selectedAnalysis')\n    analysisBasket.addEventListener('click', (e) => {\n      if(e.target.classList.contains('remove-analysis-from-basket')) {\n\n        let selectedAnalysisBasket = e.target.parentNode.parentNode\n        let indexOfAnalysisName = selectedAnalysisBasket.innerText\n        let localStorageItems = JSON.parse(localStorage.getItem('items'))\n        let nameIndex = localStorageItems.findIndex((item) => {\n            return item.name === indexOfAnalysisName\n          })\n        localStorageItems.splice(nameIndex,1)\n        items = JSON.stringify(localStorageItems)\n        selectedAnalysisBasket.remove()\n        //remove element from itemsarray\n        let removedValue = itemsArray.splice(nameIndex,1)\n        localStorage.setItem('items', items)\n\n        let basketTitle = document.createTextNode(` (${itemsArray.length}) `)\n        let cardHeader = document.getElementById('numOfAnalysis')\n        cardHeader.innerHTML=''\n        cardHeader.appendChild(basketTitle)\n\n        //hide basket if all analysis are removed\n        if(itemsArray.length == 0) {\n          document.querySelector('.card').classList.add('d-none')\n          checkout.classList.add('d-none')\n        }\n\n        checkout.innerText = itemsArray.length\n\n        //enable button for the analysis removed\n        // let enableButton = document.querySelectorAll('#resultTable tr>td>button')\n        let enableButton = document.querySelectorAll('.deleteAnalysis')\n          enableButton.forEach((item) => {\n            if(item.getAttribute('data-analysisName') == removedValue[0].name) {\n              item.disabled = false\n              item.textContent = 'dodaj'\n              item.classList.remove('deleteAnalysis')\n              item.classList.add('addAnalysis')\n            }\n          })//enable button end\n      }// remove analysis from basket\n    })\n\n  }\n\nexports.addAnalysis = (itemsArray,resultDiv, checkout) => {\n  //adding analysis to sidebar shopping cart\n  resultDiv.addEventListener('click', (e) => {\n    if(e.target.tagName === 'BUTTON' && e.target.classList.contains('addAnalysis') && itemsArray.length<30) {\n\n      itemsArray.push({\n        'name':e.target.getAttribute('data-analysisName'),\n        'id':e.target.getAttribute('data-analysisid'),\n        'logo':e.target.getAttribute('data-groupimg')\n       })\n\n       //add number of analysis to navigation\n       checkout.classList.remove('d-none')\n       checkout.innerHTML = itemsArray.length\n\n       let basketTitle = document.createTextNode(` (${itemsArray.length}) `)\n       let cardHeader = document.getElementById('numOfAnalysis')\n       cardHeader.innerHTML=''\n       cardHeader.appendChild(basketTitle)\n\n      // sorting array\n      itemsArray.sort((a,b) => {\n        if (a.name > b.name) {\n          return 1\n        } else {\n          return -1\n        }\n      })\n\n      localStorage.setItem('items', JSON.stringify(itemsArray))\n\n      let analysisAdded = document.createElement('li')\n        analysisAdded.className='list-group-item list-group-item-action'\n      //creating group image\n      let groupImage = document.createElement('img')\n        groupImage.classList = 'labGroupIconSelectedAnalysis'\n        groupImage.setAttribute('src', '/images/'+e.target.getAttribute('data-groupImg'))\n      //creating text with analysis name\n      let analysisName = document.createTextNode(e.target.getAttribute('data-analysisName'))\n      let analysisLink = document.createElement('a')\n      let slug = e.target.getAttribute('data-analysisName').split(' ')\n      let urlSlug = slug.join('-')\n        analysisLink.setAttribute('href', '/results/analysis/'+urlSlug)\n        analysisLink.className = 'nolink analysisBasketLiItem'\n        // analysisLink.setAttribute('target', '_blank')\n      analysisLink.appendChild(analysisName)\n      //creating span element for remove icon\n      let removeSpan = document.createElement('span')\n        removeSpan.className = 'float-right remove'\n      let removeImg = document.createElement('img')\n        removeImg.setAttribute('src','/images/closeBtn.svg')\n        removeImg.className = 'remove-analysis-from-basket'\n        removeSpan.appendChild(removeImg)\n        analysisAdded.appendChild(groupImage)\n        analysisAdded.appendChild(analysisLink)\n        analysisAdded.appendChild(removeSpan)\n\n        let analysisPositionArr = itemsArray.findIndex((item) => {\n          return item.name === e.target.getAttribute('data-analysisName')\n        })\n\n        // if analysis is added disable add button\n        if(analysisPositionArr !== -1) {\n          e.target.innerHTML = '&#10004;'\n          e.target.className = 'btn btn-outline-success float-right btn-block text-uppercase deleteAnalysis'\n          // e.target.className = 'btn btn-outline-success ml-5 mt-auto text-uppercase deleteAnalysis'\n          e.target.disabled = true\n        }\n\n        //insert analysis to basket\n        let selectedAnalysis = document.getElementById('selectedAnalysis')\n        selectedAnalysis.insertBefore(analysisAdded, selectedAnalysis.childNodes[analysisPositionArr])\n\n        //display basket when first analyis is added to basket\n        document.querySelector('.card').classList.remove('d-none')\n    } else if (itemsArray.length>30){\n      console.log('ne mozete dodati vise od 30 analiza u korpu')\n    }\n  })// resultdiv end\n}\n\nexports.searchLabAnalysis = (searchString, filter) => {\n\n  // let filter = 'analiza'\n  // let filterValue\n  searchString.focus()\n\n    filter.forEach((item) => {\n      if(item.checked) {\n        filterValue = item.value\n        console.log('checked ' + filterValue)\n      }\n    })\n\n  // set focus on searchanalysis field when right arrow is pressed\n  document.addEventListener('keydown', (e) => {\n      if(e.keyCode === 39) {\n        searchString.value = ''\n        searchString.focus()\n      }\n    })\n\n  //check the filter value on INDEX PAGE\n      filter.forEach((item) => {\n        item.addEventListener('click', (e) => {\n          filterValue = e.target.value\n        })\n      })\n\n  /* by default filter is set to analiza, after 500ms\n    user is redirected to results page */\n  searchString.addEventListener('input', (e) => {\n    console.log('trazim funkcija')\n    if(searchString.value.length>=2) {\n      setTimeout(function() {\n      let searchString = e.target.value\n      window.location.href = '/results/?name='+searchString+'&filter='+filterValue\n      },500)\n    }\n  })\n}\n\nexports.searchLab = (searchStr, loaderWrapper, resultDiv) => {\n  let banner = document.querySelector('.banner')\n  let analysisBasket = document.querySelector('.odabraneAnalize')\n\n  let now = new Date()\n  let day = now.getDay()\n  let date = now.getDate()\n  let month = now.getMonth()\n  let year = now.getFullYear()\n  let today = (month + 1) + \"/\" + date + \"/\" + year\n  // let danas\n  const passIds = []\n\n    fetch('/lab/'+searchStr).then((data) => {\n\n      data.json().then((result) => {\n\n        loaderWrapper.style.opacity = 0\n\n        let labTemplate = document.createElement('div')\n          labTemplate.className = 'col-12 d-flex flex-row flex-wrap'\n\n        for(i=0; i<result.length; i++) {\n          let flag = true\n          resultDiv.innerHTML = ''\n          labTemplate.innerHTML += `\n          <div class=\"lab-card\">\n            <div>\n               <img src=\"\" class=\"labInfoWindowOsiguranje privateInssuranceIcon${i}\" title=\"laboratorija sarauje sa privatnim osiguranjem\">\n               <img src=\"\" class=\"labInfoWindowVerified accreditedIcon${i}\" title=\"laboratorija je akreditovana\">\n               <span class=\"labInfoWindowTitle\">${result[i].labName}</span>\n           </div>\n             <div class=\"labInfoWindow\">\n                 <img src=\"/images/lablogo/${result[i].logo}\" class=\"labLogoInfoWindow\">\n                 <p class=\"labInfoWindowAdresa\">${result[i].address}</p>\n                 <p class=\"labInfoWindowGrad\">${result[i].placeId.place} / ${result[i].placeId.municipality}</p>\n                 <p class=\"labInfoWindowTelefoni\"> ${result[i].phone.join(', ')}</p>\n             </div>\n             <div class=\"labInfoFooter\">\n                 <img src=\"/images/radnoVreme_black.svg\" class=\"labInfoWindowWorkingHoursIcon\">\n                 <div class=\"radnoVreme\">Radno vreme</div>\n                 <div id='otvoreno' class='otvoreno${i} status'></div>\n                 <div class=\"labInfoRadnoVremeDetalji\">\n                   <p class=\"daysInWeek text-center\">P<span>${result[i].workingHours.monday.opens} - ${result[i].workingHours.monday.closes}</span></p>\n                   <p class=\"daysInWeek tuesday${i} text-center\">U<span>${result[i].workingHours.tuesday.opens} - ${result[i].workingHours.tuesday.closes}</span></p>\n                   <p class=\"daysInWeek wednesday${i} text-center\">S<span>${result[i].workingHours.wednesday.opens} - ${result[i].workingHours.wednesday.closes}</span></p>\n                   <p class=\"daysInWeek thursday${i} text-center\"><span>${result[i].workingHours.thursday.opens} - ${result[i].workingHours.thursday.closes}</span></p>\n                   <p class=\"daysInWeek friday${i} text-center\">P<span>${result[i].workingHours.friday.opens} - ${result[i].workingHours.friday.closes}</span></p>\n                   <p class=\"daysInWeek saturday${i} text-center\">S<span>${result[i].workingHours.saturday.opens} - ${result[i].workingHours.saturday.closes}</span></p>\n                   <p class=\"daysInWeek sunday${i} text-center\">N<span>${result[i].workingHours.sunday.opens} - ${result[i].workingHours.sunday.closes}</span></p>\n                 </div>\n              </div>\n              <button type=\"button\" class=\"btn btn-block btnLabDetails buttonId mt-2\" data-labName=\"laboratorija/${result[i].slug}\">saznaj vie</button>\n           </div>`\n\n           resultDiv.innerHTML = `\n           <section id=\"labDetails\">\n             <div class=\"container\">\n               <div class=\"row labContainer\">\n               </div>\n             </div>\n           </section>`\n\n           //append labcard to page\n           document.querySelector('.labContainer').appendChild(labTemplate)\n\n\n\n        let currentDay\n        let currentDayNum\n        switch (day) {\n          case 0:\n            currentDay = 'sunday'\n            currentDayNum = 0\n            break\n          case 1:\n            currentDay = 'monday'\n            currentDayNum = 1\n            break\n          case 2:\n            currentDay = 'tuesday'\n            currentDayNum = 2\n            break\n          case 3:\n            currentDay = 'wednesday'\n            currentDayNum = 3\n            break\n          case 4:\n            currentDay = 'thursday'\n            currentDayNum = 4\n            break\n          case 5:\n            currentDay = 'friday'\n            currentDayNum = 5\n            break\n          case 6:\n            currentDay = 'saturday'\n            currentDayNum = 6\n            break\n          default:\n            console.log('dan nije ok')\n        }\n\n        let radnoVreme = document.querySelector('.otvoreno'+i)\n        let todayIs = document.querySelector('.'+currentDay+i)\n        let privateInsurance = document.querySelector('.privateInssuranceIcon'+i)\n        let accredited = document.querySelector('.accreditedIcon'+i)\n        let labDetailsBtn = document.querySelectorAll('.buttonId')\n         labDetailsBtn.forEach(item => {\n           item.addEventListener('click', e => {\n             itemsArray = localStorage.getItem('items') ? JSON.parse(localStorage.getItem('items')) : []\n               itemsArray.forEach(item => {\n               passIds.push(item.id)\n               });\n             window.location = `/${e.target.getAttribute('data-labName')}/${passIds}`\n           })\n         })\n\n\n        if(result[i].private) {\n          privateInsurance.setAttribute('src', '/images/osiguranje.svg')\n        } else {\n          privateInsurance.remove()\n        }\n\n        if(result[i].accredited) {\n          accredited.setAttribute('src', '/images/verified.svg')\n        } else {\n          accredited.remove()\n        }\n\n        if(result[i].open24h) {\n          radnoVreme.classList.add('open')\n          radnoVreme.innerText = 'otvoreno 24h'\n          todayIs.classList.add('open')\n        } else if(day === currentDayNum) {\n\n          let openTime = result[i].workingHours[currentDay].opens\n          let closingTime = result[i].workingHours[currentDay].closes\n          let todayOpenTime = new Date(today +' '+ openTime +':00')\n          let todayClosingTime = new Date(today +' '+ closingTime +':00')\n          let nowTimeStamp = now.getTime()\n          let closingSoon = todayClosingTime - nowTimeStamp\n          let closingIn = (Math.ceil(closingSoon/1000/60))\n\n          if (closingIn < 60 && closingIn > 0) {\n            radnoVreme.classList.add('closedSoon')\n            radnoVreme.innerText = `zatvara se za ${closingIn} min.`\n            todayIs.classList.add('active')\n          }\n\n            else if(nowTimeStamp > todayOpenTime.getTime() &&\n                todayClosingTime.getTime() > nowTimeStamp) {\n                radnoVreme.classList.add('open')\n                radnoVreme.innerText = 'otvoreno'\n                todayIs.classList.add('open')\n            }\n            else {\n                radnoVreme.classList.add('closed')\n                radnoVreme.innerText = 'zatvoreno'\n                todayIs.classList.add('closed')\n            }\n          } else {\n            console.log('lab nije odredio radno vreme')\n          }\n      }//for loop end\n\n      })//data json end\n    })//fetch end\n}\n","exports.createPrice = () => {\n\n  let searchLab = document.getElementById('searchLabName')\n  let queryResultUl = document.getElementById('labFound')\n  let labName = document.getElementById('labName')\n\n  searchLab.addEventListener('input', (e) => {\n    if(searchLab.value.length>2) {\n      fetch('/lab/'+e.target.value).then((data) => {\n        data.json().then((result) => {\n          for(i=0; i<result.length; i++) {\n            let liItem = document.createElement('li')\n            liItem.className +=\"list-group-item\"\n            let link = document.createElement('a')\n            link.href=result[i]._id\n            liItem.appendChild(link)\n            let labName = document.createTextNode(result[i].labName)\n            link.appendChild(labName)\n            queryResultUl.appendChild(liItem)\n          }// for end\n        })// data.json end\n      })// fetch end\n    } // if end\n    else {\n      console.log('please enter at lease 2 chars')\n      queryResultUl.innerHTML = ''\n    }\n  })\n\n  let labSelected = document.getElementById('labFound')\n    labSelected.addEventListener('click', (e) => {\n      e.preventDefault()\n      searchLab.value = e.srcElement.attributes.href.textContent\n      labName.value=e.target.innerText\n      queryResultUl.innerHTML = ''\n    })\n\n  //search for analysis\n\n  let searchAnalysis = document.getElementById('searchAnalysis')\n  let getAnalyisisNameDiv = document.getElementById('analysisFound')\n  let analysisParentDiv = document.getElementById('analysisDiv')\n  let priceParent = document.getElementById('priceList')\n\n  // set focus on searchanalysis field when up arrow is pressed\n  document.addEventListener('keydown', (e) => {\n    if(e.keyCode === 38) {\n      searchAnalysis.focus()\n    }\n  })\n\n  searchAnalysis.addEventListener('input', (e) => {\n    if (searchAnalysis.value.length > 2) {\n    fetch('/analysis/prices/'+e.target.value).then((data) => {\n      data.json().then((result) => {\n        let analysis = result.analysisName\n        getAnalyisisNameDiv.innerHTML = ''\n        for(i=0; i<analysis.length; i++) {\n          let liItem = document.createElement('li')\n          liItem.className +=\"list-group-item\"\n          let link = document.createElement('a')\n          link.href=analysis[i]._id\n          liItem.appendChild(link)\n          let analysisName = document.createTextNode(analysis[i].analysisName)\n          link.appendChild(analysisName)\n          getAnalyisisNameDiv.appendChild(liItem)\n        } // for end\n      })// datajson end\n    })// fetch end\n  } else {\n      getAnalyisisNameDiv.innerHTML = ''\n    }\n  })// searchAnalysis event listener end\n\n  // creating input fields\n  let analysisFound = document.getElementById('analysisFound')\n\n    analysisFound.addEventListener('click', (e) => {\n      e.preventDefault()\n\n      let hiddenId = document.createElement('input')\n      hiddenId.type = 'hidden'\n      hiddenId.name = 'cenovnik[analiza][]'\n      hiddenId.setAttribute('value', e.srcElement.attributes.href.textContent)\n\n      let analysisRow = document.createElement('div')\n        analysisRow.className = 'form-row'\n\n      let analysisNewDiv = document.createElement('div')\n        analysisNewDiv.className = 'form-group mt-2 col-6'\n\n      let analysisName = document.createElement('input')\n        analysisName.type = 'text'\n        analysisName.className = 'form-control'\n        analysisName.name='cenovnik[imeanalize][]'\n        analysisName.setAttribute('value', e.target.innerText)\n        analysisName.setAttribute('readonly', true)\n\n      let analysisPrice = document.createElement('div')\n        analysisPrice.className = 'form-group mt-2 col-5'\n\n      let deletePrice = document.createElement('div')\n        deletePrice.className = 'form-group mt-2 col-1'\n\n      let price = document.createElement('input')\n        price.type = 'text'\n        price.setAttribute('placeholder', 'upisi cenu')\n        price.name = 'cenovnik[cena][]'\n        price.className = 'form-control'\n\n      let deleteButton = document.createElement('button')\n        deleteButton.className='btn btn-danger float-right deletePrice'\n        deleteButton.type='button'\n        deleteButton.name='button'\n          let buttonText = document.createTextNode('delete')\n          deleteButton.appendChild(buttonText)\n        deletePrice.appendChild(deleteButton)\n\n      analysisNewDiv.appendChild(analysisName)\n      analysisPrice.appendChild(price)\n      analysisNewDiv.appendChild(hiddenId)\n\n      analysisRow.appendChild(analysisNewDiv)\n      analysisRow.appendChild(analysisPrice)\n      analysisRow.appendChild(deletePrice)\n\n      // analysisParentDiv.appendChild(analysisRow)\n      priceParent.appendChild(analysisRow)\n\n      price.focus()\n      searchAnalysis.value=''\n      getAnalyisisNameDiv.innerHTML = ''\n\n    })// analysisfound end\n\n    // delete price from pricelist\n      let deletePrice = document.getElementById('priceList')\n      // console.log(deletePrice)\n        deletePrice.addEventListener('click', (e) => {\n          // console.log(deletePrice)\n          if(e.target.classList.contains('deletePrice')) {\n            e.preventDefault()\n            e.target.parentNode.parentNode.remove()\n          }\n        })\n}\n","require('../scss/style.scss')\nconst flatpickr = require(\"flatpickr\")\nconst Serbian = require(\"flatpickr/dist/l10n/sr.js\").default.sr;\n\n\n\n// let summernote = require('./summernote-ext-addclass')\nlet NewElement = require('./class')\nlet PriceList = require('./price')\nlet helper = require('./functions')\n\n\n//tooltip initialization\n$(document).ready(function(){\n  $('body').tooltip({\n    selector:'[data-toggle=\"tooltip\"]',\n    placement:\"top\",\n    delay: {show: 100, hide: 100},\n    boundary: 'window',\n    tooltipClass: \"tooltip\"\n  })\n\nlet maxDate = new Date()\nmaxDate.setDate(maxDate.getDate() + 7)\n\n\n\nlet datePicker1 = flatpickr('#datepicker1',{\n  dateFormat: 'Y-m-d',\n  altInput:true,\n  altFormat: \"F j, Y\",\n  enableTime: false,\n  time_24hr: true,\n  \"locale\": Serbian,\n  minDate: \"today\",\n  allowInput:true,\n  maxDate: maxDate\n});\n\nlet datePicker2 = flatpickr('#datepicker2',{\n  dateFormat: 'Y-m-d H:i',\n  altFormat: \"F j, Y H:i\",\n  altInput:true,\n  enableTime: true,\n  time_24hr: true,\n  \"locale\": Serbian,\n  minDate: \"today\",\n  allowInput:true,\n  maxDate:maxDate\n});\n\n  $('#resultTable, #resultTableAnalysis').on('mouseenter','tr>td>img.tooltipImg', function(){\n    var imageSrc = $(this).attr('src');\n    // if (imageSrc == '/images/detail.svg') {\n      $(this).attr('src','/images/detail_mv.svg');\n    }).on('mouseleave','tr>td>img.tooltipImg', function(){\n      $(this).attr('src', '/images/detail.svg');\n    })\n\n  $('.fa-angle-down').on('click', function() {\n      $(this).toggleClass('rotate');\n  })\n  $(\".custom-file-input\").on(\"change\", function() {\n  var fileName = $(this).val().split(\"\\\\\").pop();\n  $(this).siblings(\".custom-file-label\").addClass(\"selected\").html(fileName);\n});\n});\n\n// changing analysis number color on hover\n$('.click-more').hover(function(){\n  $(this).find(\"span\").toggleClass(\"broj-analiza-hover\");\n});\n\n\n// sticky navigation for index page\n$(window).scroll(function(){\n  var height = $(window).scrollTop();\n    if(height > 460) {\n      $(\"#header > nav\").addClass('fixed-top-background fixed-top');\n    }\n    else {\n      $(\"#header > nav\").removeClass('fixed-top-background fixed-top');\n    }\n});\n\n// sticky navigation for side menu\n$(window).scroll(function(){\n  var height = $(window).scrollTop();\n    if(height > 120) {\n      $(\".odabraneAnalize\").addClass('fixed-right')\n    }\n    else {\n      $(\".odabraneAnalize\").removeClass('fixed-right')\n    }\n})\n\n// scrol to top button\n$('.backTotop').on('click',function(){\n  $('html, body').animate({scrollTop:0}, 1200);\n    // return false;\n});\n\n//animate numbers on google map header\n\n\nlet location = window.location.pathname\nconsole.log(location)\n// GLOBAL VARIABLES\n//set filter by default to analiza\nlet filter = 'analiza'\nlet checkout = document.querySelector('.checkout')\nlet urlArr = location.split('/')\n\n/* check if local storage already exists,\nif not create an empty array */\nlet itemsArray = localStorage.getItem('items') ? JSON.parse(localStorage.getItem('items')) : []\n\n//MUST CHECK THIS!!!!!!!\n/*if local storage has already some items display selected items\nin sidebar basket on any page which is not index */\nconst checkUrl = /result.*/\nconst group = /group/\nif(itemsArray.length>0 && (location.match(group) || location.match(checkUrl))) {\n  helper.displayBasket(itemsArray)\n}\n\n//MUST CHECK THIS!!!!!!!\n//get reference to checkout element which displays number of selected analysis in navigation\nconst checkCMSAdd = /add.*/\nconst checkCMSAll = /all.*/\nlet findUserByEmail = document.getElementById('searchForUserEmail')\n\nif (itemsArray.length > 0 && !location.match(checkCMSAdd) && !location.match(checkCMSAll) && !findUserByEmail) {\n  checkout.classList.remove('d-none')\n  checkout.textContent = itemsArray.length\n}\n\n\nwindow.onload = () => {\n\n/* INDEX PAGE ***************/\n\nif(location === '/') {\n\n  //get seachstring\n  let mainSearch = document.getElementById('searchAnalysis')\n  //ger reference to filter\n  let analysisRadio = document.querySelectorAll('input[name=searchFilter]')\n  //search for analysis or lab\n  helper.searchLabAnalysis(mainSearch,analysisRadio)\n\n} // INDEX page end\n\n/* NAJBOLJA CENA **************/\n\n// if(document.getElementById('najboljacena') != null) {\n//   console.log('ovde sad')\n// }\n\n/* RESULTS PAGE ***************/\n\n\n// if (urlArr[1] === 'results' && urlArr[2] == '') {\nif (document.getElementById('results')!=null) {\n\n  const activeBtns = document.querySelectorAll('.addAnalysis')\n  activeBtns.forEach(analysis => {\n    let analysisPositionArr = itemsArray.findIndex((item) => {\n        return analysis.getAttribute(\"data-analysisid\") === item.id\n    })\n    if(analysisPositionArr !== -1) {\n      analysis.innerHTML = '&#10004;'\n      analysis.disabled = true\n      analysis.classList.remove('addAnalysis')\n      analysis.classList.add('deleteAnalysis')\n    }\n  })\n\n//show prices\n  let resultDiv = document.getElementById('resultTable')\n  const municipality = document.getElementById('municipality')\n  const showPriceBtn = document.querySelector('.showPrice')\n  let mapArea = document.getElementById('mapPrices')\n  showPriceBtn.addEventListener('click', e => {\n    e.preventDefault()\n    window.scrollTo({\n    top:0,\n    behavior:'smooth'})\n    mapArea.classList.remove('d-none')\n    let passIds = []\n    resultDiv.innerHTML = ''\n    itemsArray = localStorage.getItem('items') ? JSON.parse(localStorage.getItem('items')) : []\n      itemsArray.forEach(item => {\n      passIds.push(item.id)\n      });\n\n    let municipalityValue = municipality.options[municipality.selectedIndex].value\n    let markers = []\n\n    fetch('/cenovnik/'+municipalityValue+'/'+passIds).then(data => {\n      data.json().then(result => {\n        loaderWrapper.style.opacity = 0\n        let labTemplate = document.createElement('div')\n          labTemplate.className = 'col-12 d-flex flex-row flex-wrap'\n\n        for(let i=0; i<result.length; i++) {\n// console.log(result[i].lab[0].workingHours)\n\n        markers.push(\n          {\n            lat:result[i].lab[0].location.coordinates[1], lng:result[i].lab[0].location.coordinates[0],\n            iconImage:'/images/pinopen.svg',\n            total:result[i].total,\n            name:result[i].lab[0].labName,\n            address:result[i].lab[0].address,\n            phone:result[i].lab[0].phone,\n            workinghours:result[i].lab[0].workingHours,\n            slug:result[i].lab[0].slug\n          }\n        )\n          resultDiv.innerHTML = ''\n          labTemplate.innerHTML += `\n\n          <div class=\"lab-card\">\n            <div>\n            ${(result[i].lab[0].private)? '<img src=/images/osiguranje.svg class=\"labInfoWindowOsiguranje privateInssuranceIcon${i}\" title=\"laboratorija sarauje sa privatnim osiguranjem\">' : ''}\n            ${(result[i].lab[0].accredited)? '<img src=/images/verified.svg class=\"labInfoWindowVerified accreditedIcon${i}\" title=\"laboratorija je akreditovana\">' : ''}\n            <span class=\"labInfoWindowTitle\">${result[i].lab[0].labName}</span>\n           </div>\n             <div class=\"labInfoWindow\">\n                 <img src=\"/images/lablogo/${result[i].lab[0].logo}\" class=\"labLogoInfoWindow\">\n\n                 <p class=\"labInfoWindowAdresa\">${result[i].lab[0].address}</p>\n                 <p class=\"labInfoWindowGrad\"></p>\n                 <p class=\"labInfoWindowTelefoni\"> ${result[i].lab[0].phone} </p>\n             </div>\n             <div class=\"labInfoFooter\">\n                 <img src=\"/images/radnoVreme_black.svg\" class=\"labInfoWindowWorkingHoursIcon\">\n                 <div class=\"radnoVreme\">Radno vreme</div>\n                 <div id='otvoreno' class='otvoreno status'></div>\n                 <div class=\"labInfoRadnoVremeDetalji\">\n                   <p class=\"daysInWeek monday${result[i]} text-center\">P<span>${result[i].lab[0].workingHours.monday.opens} - ${result[i].lab[0].workingHours.monday.closes}</span></p>\n                   <p class=\"daysInWeek tuesday${result[i]} text-center\">U<span>${result[i].lab[0].workingHours.tuesday.opens} - ${result[i].lab[0].workingHours.tuesday.closes}</span></p>\n                   <p class=\"daysInWeek wednesday${result[i]} text-center\">S<span>${result[i].lab[0].workingHours.wednesday.opens} - ${result[i].lab[0].workingHours.wednesday.closes}</span></p>\n                   <p class=\"daysInWeek thursday${result[i]} text-center\"><span>${result[i].lab[0].workingHours.thursday.opens} - ${result[i].lab[0].workingHours.thursday.closes}</span></p>\n                   <p class=\"daysInWeek friday${result[i]} text-center\">P<span></span>${result[i].lab[0].workingHours.friday.opens} - ${result[i].lab[0].workingHours.friday.closes}</p>\n                   <p class=\"daysInWeek saturday${result[i]} text-center\">S<span></span>${result[i].lab[0].workingHours.saturday.opens} - ${result[i].lab[0].workingHours.saturday.closes}</p>\n                   <p class=\"daysInWeek sunday${result[i]} text-center\">N<span></span>${result[i].lab[0].workingHours.sunday.opens} - ${result[i].lab[0].workingHours.sunday.closes}</p>\n                 </div>\n              </div>\n              <a class=\"btn btn-block btnLabDetails buttonId mt-2\" href=\"laboratorija/${result[i].lab[0].slug}/${passIds}\">saznaj vie</a>\n           </div>`\n\n           resultDiv.innerHTML = `\n           <section id=\"labDetails\">\n             <div class=\"container\">\n               <div class=\"row labContainer\">\n               </div>\n             </div>\n           </section>`\n\n           //append labcard to page\n           document.querySelector('.labContainer').appendChild(labTemplate)\n        }\n        // map options\n        let options = {\n          zoom:16,\n          // center: {lat:44.808048, lng:20.462796},\n          disableDefaultUI: true,\n          zoomControl: false,\n          mapTypeControl: false,\n          scaleControl: false,\n          streetViewControl: true,\n          rotateControl: false,\n          fullscreenControl: true,\n          fullscreenControlOptions:{\n            position:google.maps.ControlPosition.RIGHT_BOTTOM\n          },\n          styles: [\n              {\n                \"featureType\": \"administrative.country\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#fbd2d9\"\n                  },\n                  {\n                    \"visibility\": \"on\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"administrative.country\",\n                \"elementType\": \"geometry.stroke\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#9896a9\"\n                  },\n                  {\n                    \"weight\": 2\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"administrative.land_parcel\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#9896a9\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"administrative.land_parcel\",\n                \"elementType\": \"labels\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"off\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"administrative.locality\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"on\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"administrative.neighborhood\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"on\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"administrative.neighborhood\",\n                \"elementType\": \"labels\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#aaa9b1\"\n                  },\n                  {\n                    \"visibility\": \"simplified\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"poi\",\n                \"elementType\": \"labels.text\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"off\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"poi.business\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"off\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"poi.park\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#aadc55\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"poi.park\",\n                \"elementType\": \"labels.text\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"off\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"road\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#ecebed\"\n                  },\n                  {\n                    \"visibility\": \"on\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"road\",\n                \"elementType\": \"labels.text\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#d8d6dc\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"road.arterial\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#fefefe\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"road.arterial\",\n                \"elementType\": \"labels.text\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#9a9a9a\"\n                  },\n                  {\n                    \"visibility\": \"simplified\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"road.highway\",\n                \"elementType\": \"labels\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"off\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"road.local\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"off\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"road.local\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#eaecec\"\n                  },\n                  {\n                    \"visibility\": \"on\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"road.local\",\n                \"elementType\": \"labels\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"off\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"road.local\",\n                \"elementType\": \"labels.text.fill\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#9ba4a4\"\n                  },\n                  {\n                    \"visibility\": \"on\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"transit\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"off\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"transit.station\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"on\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"transit.station.bus\",\n                \"stylers\": [\n                  {\n                    \"visibility\": \"simplified\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"transit.station.bus\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#ff00ff\"\n                  },\n                  {\n                    \"visibility\": \"simplified\"\n                  }\n                ]\n              },\n              {\n                \"featureType\": \"water\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": [\n                  {\n                    \"color\": \"#1d88e5\"\n                  },\n                  {\n                    \"lightness\": 15\n                  }\n                ]\n              }\n            ]\n        }\n        // new map\n        let map = new google.maps.Map(document.getElementById('mapPrices'), options)\n            map.setCenter({lat:result[0].lab[0].location.coordinates[1], lng:result[0].lab[0].location.coordinates[0]});\n\n        for(i=0; i<markers.length; i++) {\n        addMarker(markers[i].lat,\n                  markers[i].lng,\n                  markers[i].total,\n                  markers[i].name,\n                  markers[i].address,\n                  markers[i].phone,\n                  markers[i].workinghours,\n                  markers[i].slug)\n        }\n\n      // console.log(markers)\n        function addMarker(lat, lng, total, name, address, phone, workinghours,slug) {\n          let marker = new google.maps.Marker({\n            position:{lat:lat, lng:lng},\n            icon:{\n              url:'/images/pinprice.svg',\n              labelOrigin: {x: 32, y: 32},\n              scaledSize: new google.maps.Size(60, 60)\n            },\n            label:{\n              text:total.toString(),\n              fontWeight: 'bold',\n              fontSize: '12px',\n              color:'white'\n            },\n            map:map\n            })\n\n            let infoWindow = new google.maps.InfoWindow({\n              maxWidth:600,\n              content:`<p class=\"labInfoWindowTitle mb-2 pb-0\"><a href=\"/laboratorija/${slug}/${passIds}\">${name}</a></p>\n\n                      <div class=\"labInfoWindow\">\n                        <img src=\"images/placeholder.svg\" class=\"labLogoInfoWindow\">\n                        <span class=\"\">${address}</span>\n                        <span class=\"labInfoWindowTelefoni\">${phone} </span>\n                    </div>\n                    <table class=\"table table-sm workingHoursLabDetails mt-2\">\n                      <thead>\n                        <tr>\n                          <th class=\"text-center px-0 whInside\">P</th>\n                          <th class=\"text-center px-0 whInside\">U</th>\n                          <th class=\"text-center px-0 whInside\">S</th>\n                          <th class=\"text-center px-0 whInside\"></th>\n                          <th class=\"text-center px-0 whInside\">P</th>\n                          <th class=\"text-center px-0 whInside\">S</th>\n                          <th class=\"text-center px-0 whInside\">N</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <tr>\n                          <td class=\"whInside px-0 text-center\">${workinghours.monday.opens} - ${workinghours.monday.closes}</td>\n                          <td class=\"whInside px-0 text-center\">${workinghours.tuesday.opens} - ${workinghours.tuesday.closes}</td>\n                          <td class=\"whInside px-0 text-center radnoVreme open\">${workinghours.wednesday.opens} - ${workinghours.wednesday.closes}</td>\n                          <td class=\"whInside px-0 text-center\">${workinghours.thursday.opens} - ${workinghours.thursday.closes}</td>\n                          <td class=\"whInside px-0 text-center\">${workinghours.friday.opens} - ${workinghours.friday.closes}</td>\n                          <td class=\" whInside px-0 text-center\">${workinghours.saturday.opens} - ${workinghours.saturday.closes}</td>\n                          <td class=\"whInside px-0 text-center\">${workinghours.sunday.opens} - ${workinghours.sunday.closes}</td>\n                        </tr>\n                      </tbody>\n                    </table>\n                    `\n\n            });\n\n            marker.addListener('click', function(){\n              var placeMarker = infoWindow.open(map, marker);\n            });\n\n            google.maps.event.addListener(map, 'click', function() {\n              infoWindow.close();\n            });\n        }\n      })//data json end\n    })//fetch end\n  })\n\n  //create wrapper for live search icon\n  let loaderWrapper = document.querySelector('.loader-wrapper')\n  //get seachstring\n  // let mainSearchinner = document.getElementById('searchResultPage')\n  //ger reference to filter\n  // let analysisRadioinner = document.querySelectorAll('input[name=searchFilter]')\n  //search for analysis or lab\n  //proveriti da li je ovo ispod neophodno\n  // helper.searchLabAnalysis(mainSearchinner,analysisRadioinner)\n\n  const urlParams = new URLSearchParams(window.location.search)\n  let myValue = urlParams.get('name')\n  let myFilter = urlParams.get('filter')\n  history.replaceState(null,null,`/`)\n\n  // creating variable for search field and assigning value from search string\n  let innerSearch = document.getElementById('searchResultPage')\n    //keeps search string when page is changed\n    innerSearch.value = myValue\n    innerSearch.focus()\n\n  //defining new variable which will be used in queries\n  let searchStr = myValue\n  // display checked filter\n  let radioFilter = document.querySelectorAll('input[name=searchFilter]')\n    radioFilter.forEach((item) => {\n      if(item.value == myFilter) {\n        item.checked=true\n        console.log('checked ' + myFilter)\n      }\n    })\n\n    // if user is searching from home page take result div\n    // let resultDiv = document.getElementById('resultTable')\n\n    // if filter value is changed on result searchResultPage\n    // taking filter value\n    let analysisRadio = document.querySelectorAll('input[name=searchFilter]')\n        analysisRadio.forEach((item) => {\n          item.addEventListener('click', (e) => {\n            myFilter = e.target.value\n            console.log('kada se promeni ' + myFilter)\n            innerSearch.value=''\n            innerSearch.focus()\n          })\n        })\n\n\n    if(myFilter === 'analiza') {\n      console.log('pretraga analize sa glavne stranice')\n      fetch('/analysis/prices/'+searchStr).then((data) => {\n        // loaderWrapper.style.opacity = 1\n        data.json().then((result) => {\n          console.log(result)\n          resultDiv.innerHTML = ''\n          let analysis = result.analysisName\n          // let pricesMin = result.minPriceArr\n          // let pricesMax = result.maxPriceArr\n          let prices = result.prices\n          for(i=0; i<analysis.length; i++) {\n            //creating table with result\n            helper.renderAnalysisResult(analysis, prices, resultDiv, itemsArray)\n          }// for end\n          //when result is found remove loading icon\n          loaderWrapper.style.opacity = 0\n        })// data json end\n      })//fetch end\n    }// if my filter==analiza\n    else if (myFilter == 'laboratorija'){\n      console.log('pretraga lab sa index strance')\n      helper.searchLab(searchStr, loaderWrapper, resultDiv)\n      }// else end\n\n    // if search string is changed on result page\n    // let loaderWrapper = document.querySelector('.loader-wrapper')\n    innerSearch.addEventListener('input', (e) => {\n      // console.log('searching'+ filter)\n    let mapFrame = document.getElementById('mapPrices')\n    mapFrame.classList.add('d-none')\n        let searchstring = e.target.value\n        loaderWrapper.style.opacity = 1\n        if(myFilter == 'analiza' && searchstring.length>=2) {\n          fetch('/analysis/prices/'+searchstring).then((data) => {\n            data.json().then((result) => {\n              let analysis = result.analysisName\n              // let pricesMin = result.minPriceArr\n              // let pricesMax = result.maxPriceArr\n              let prices = result.prices\n              resultDiv.innerHTML = ''\n                for(i=0; i<analysis.length; i++) {\n                  //creating table with results\n                  //when typing fast parent array becomes undefined hence error\n                  if(typeof(prices)!==\"undefined\") {\n                   helper.renderAnalysisResult(analysis, prices, resultDiv, itemsArray)\n                 } else {\n                   console.log('nema cene za ovu analizu')\n                 }\n                }// for end\n                if(data.status == 200) {\n                  loaderWrapper.style.opacity = 0\n                }\n            })// data json end\n          })//fetch end\n        }\n        else if(searchstring.length>=2){\n            //searching for labs from result page\n            helper.searchLab(searchstring, loaderWrapper, resultDiv)\n          } else {\n            console.log('unesite vise od 2 karaktera da zapocnete pretragu')\n            resultDiv.innerHTML += ''\n            resultDiv.innerHTML = 'Unesite nesto'\n            loaderWrapper.style.opacity = 0\n          }\n      })\n\n        helper.addAnalysis(itemsArray, resultDiv, checkout)\n        helper.removeAnalysis(itemsArray, checkout)\n\n\n}\n\n//group analysis page\nif(document.getElementById('resultsGroupDetails')!= null) {\n\n  const activeBtns = document.querySelectorAll('.addAnalysis')\n  activeBtns.forEach(analysis => {\n    let analysisPositionArr = itemsArray.findIndex((item) => {\n        return analysis.getAttribute(\"data-analysisid\") === item.id\n    })\n    if(analysisPositionArr !== -1) {\n      analysis.innerHTML = '&#10004;'\n      analysis.disabled = true\n      analysis.classList.remove('addAnalysis')\n      analysis.classList.add('deleteAnalysis')\n    }\n  })\n\n  let loaderWrapper = document.querySelector('.loader-wrapper')\n  loaderWrapper.style.opacity = 0\n  let resultDiv = document.getElementById('resultTable')\n  // get seachstring\n  let mainSearchinner = document.getElementById('searchResultPage')\n  // ger reference to filter\n  let analysisRadioinner = document.querySelectorAll('input[name=searchFilter]')\n  // search for analysis or lab\n  // proveriti da li je ovo ispod neophodno\n  helper.searchLabAnalysis(mainSearchinner,analysisRadioinner)\n  helper.addAnalysis(itemsArray, resultDiv, checkout)\n  helper.removeAnalysis(itemsArray, checkout)\n}\n\nif (urlArr[1] == 'tumacanje-laboratorijskih-analiza') {\n  let mainSearchinner = document.getElementById('searchResultPage')\n  // ger reference to filter\n  let analysisRadioinner = document.querySelectorAll('input[name=searchFilter]')\n  // search for analysis or lab\n  helper.searchLabAnalysis(mainSearchinner,analysisRadioinner)\n}\n\n// lab details PAGE\nif(urlArr[1] == 'laboratorija') {\n  let labLocationUrl = location.split('/')\n  let labName = labLocationUrl[2]\n\n  let uzorakLab = document.querySelector('.uzorakLab')\n  let uzorakPatronaza = document.querySelector('.uzorakPatronaza')\n\n  const dateLab = document.getElementById('datepicker1')\n  const datePatronaza = document.getElementById('datepicker2')\n\n\n  let uzimanjeUzorka = document.querySelectorAll('input[name=uzimanjeUzorka]')\n   uzimanjeUzorka.forEach(item => {\n      item.addEventListener('change', e => {\n        if(e.target.value == 'laboratorija') {\n            uzorakLab.classList.toggle('d-none')\n            uzorakPatronaza.classList.add('d-none')\n            datePatronaza.value=''\n\n        } else {\n          uzorakPatronaza.classList.toggle('d-none')\n          uzorakLab.classList.add('d-none')\n          dateLab.value = ''\n\n        }\n\n      })\n   });\n\n\n  history.replaceState(null,null,`/laboratorija/${labLocationUrl[2]}`)\n  //take input values from search box and filter reference\n  let innerPageSearch = document.getElementById('searchResultPage')\n  let analysisRadio = document.querySelectorAll('input[name=searchFilter]')\n  // search for analysis or lab\n  // helper.searchLabAnalysis(innerPageSearch,analysisRadio)\n  let searchString = document.getElementById('searchResultPage')\n    searchString.focus()\n  let filter = document.querySelectorAll('input[name=searchFilter]')\n  let resultDiv = document.getElementById('resultTableAnalysis')\n  let resultTable = document.getElementById('resultTable')\n  let numOfAnalysis = document.querySelector('.numAnalysis')\n  let checkout = document.querySelector('.checkout')\n  let filterValue = 'analiza'\n  let schedule = []\n  //check the filter value on INDEX PAGE\n      filter.forEach((item) => {\n        item.addEventListener('click', (e) => {\n          filterValue = e.target.value\n        })\n      })\n\n      /* by default filter is set to analiza, after 500ms\n        user is redirected to results page */\n\n  //show totalPrice\n  let prices = document.querySelectorAll('.price')\n  let totalPriceSpan = document.querySelector('.totalPrice')\n  let resultSection = document.getElementById('resultsLabDetails')\n  // let table = document.getElementById('resultTableAnalysis')\n  let itemsArray = JSON.parse(localStorage.getItem('items'))\n  let totalPrice = 0\n    prices.forEach(item =>  {\n      totalPrice += parseInt(item.getAttribute('data-price'))\n    })\n\n    const labIdName = document.getElementById('labName')\n    labId = labIdName.getAttribute('data-id')\n\n    schedule.push({\"total\":totalPrice})\n    schedule.push({\"analysis\":itemsArray})\n    schedule.push({\"labId\":labId})\n    schedule.push({\"date\":''})\n    scheduleString = JSON.stringify(schedule)\n    // console.log('1' + scheduleString)\n\n\n    //search and add analysis from lab details page\n    searchString.addEventListener('input', (e) => {\n      if(searchString.value.length>=3 && filterValue == 'analiza' ) {\n        let searchString = e.target.value\n        // fetch('/analysis/prices/'+searchString)\n        fetch('/search/analysis/'+searchString+'/'+labName)\n          .then(data => data.json())\n          .then(result => {\n\n            resultDiv.innerHTML = ''\n            let icon = []\n            let alreadySelectedArray = []\n            for(i=0; i<result.length; i++) {\n\n              let alreadySelected = itemsArray.findIndex(item => {\n                return item.id == result[i].idAnalysis\n              })\n              alreadySelectedArray.push(alreadySelected)\n\n              let availableHC = result[i].availableHC\n              icon.push(...availableHC)\n\n              if(alreadySelectedArray[i] == -1) {\n                let results = `\n                  <tr>\n                    <td><img src=\"/images/detail.svg\" data-toggle=\"tooltip\" title=\"${result[i].preview}\" class=\"tooltipImg mr-2\">\n                    <a href=\"../results/analysis/${result[i].slug}\" class=\"nolink\">${result[i].name}</a></td>\n                    <td>${result[i].abbr}</td>\n                    <td>${result[i].alt}</td>\n                    <td><img src=${icon[i] ? '/images/hospital-alt.svg' : '/images/hospital-alt_off.svg'}></td>\n                    <td><span class=\"font-weight-bold price\">${result[i].cenovnik.cena}</span></td>\n                    <td><button class=\"btn btn-outline-success float-right btn-block text-uppercase addAnalysis\" data-analysisid=\"${result[i].idAnalysis}\"  data-analysisName=\"${result[i].name}\" data-price=${result[i].cenovnik.cena} data-abbr=\"${result[i].abbr}\" data-iconPath=\"${result[i].groupID[i].iconPath}\" data-alt=\"${result[i].alt}\" data-icon=\"${icon[i] ? '/images/hospital-alt.svg' : '/images/hospital-alt_off.svg'}\">dodaj</button></td>\n                  </tr>\n                `\n                resultDiv.innerHTML += results\n              }\n            }\n          })// data json end\n\n        }\n      else {\n        console.log('unesite vise od 2 karaktera')\n        resultDiv.innerHTML = ''\n      }\n    })\n\n\n    let addAnalysisBtn = document.getElementById('resultTableAnalysis')\n      addAnalysisBtn.addEventListener('click', e => {\n        if(e.target.tagName === 'BUTTON' && e.target.classList.contains('addAnalysis')) {\n          e.target.innerHTML = '&#10004;'\n          e.target.disabled = true\n          totalPrice  += parseInt(e.target.getAttribute('data-price'))\n          totalPriceSpan.innerText = `Ukupno: ${totalPrice} din.`\n          resultSection.classList.remove('d-none')\n          checkout.classList.remove('d-none')\n          itemsArray.push({\n            'name':e.target.getAttribute('data-analysisName'),\n            'id':e.target.getAttribute('data-analysisid'),\n            'logo':e.target.getAttribute('data-iconPath')\n           })\n\n           schedule[0].total=totalPrice\n           schedule[1].analysis = itemsArray\n           schedule[2].labId = labId\n           scheduleString = JSON.stringify(schedule)\n\n           numOfAnalysis.innerHTML = `Broj odabranih analiza (${itemsArray.length})`\n           checkout.textContent = itemsArray.length\n           itemsArray.sort((a,b) => {\n             if (a.name > b.name) {\n               return 1\n             } else {\n               return -1\n             }\n           })\n           localStorage.setItem('items', JSON.stringify(itemsArray))\n           let additionalResult = `\n               <tr>\n                 <td><img src=\"/images/detail.svg\" data-toggle=\"tooltip\" title=\"\" class=\"tooltipImg mr-2\">\n                 <a href=\"../results/analysis/${e.target.getAttribute('data-analysisName')}\" class=\"nolink\">${e.target.getAttribute('data-analysisName')}</a></td>\n                 <td>${e.target.getAttribute('data-abbr')}</td>\n                 <td>${e.target.getAttribute('data-alt')}</td>\n                 <td><img src=\"${e.target.getAttribute('data-icon')}\"></td>\n                 <td><span class=\"font-weight-bold price\">${e.target.getAttribute('data-price')}</span></td>\n                 <td><button class=\"btn btn-outline-danger float-right btn-block text-uppercase removeAnalysis\" data-analysisid=\"${e.target.getAttribute('data-analysisid')}\" data-groupImg=\"\" data-analysisName=\"\" >X</button></td>\n               </tr>\n           `\n           resultTable.innerHTML += additionalResult\n        }\n      })\n\n    ///////////////////////////\n    if(itemsArray.length == 0) {\n      resultSection.classList.add('d-none')\n      checkout.classList.add('d-none')\n    } else {\n      totalPriceSpan.innerText = `Ukupno: ${totalPrice} din.`\n\n      //remove analysis from basket\n      let removeAnalysisLabPage = document.getElementById('resultTable')\n        removeAnalysisLabPage.addEventListener('click', e => {\n            if(e.target.classList.contains('removeAnalysis')) {\n            resultDiv.innerHTML = ''\n            searchString.value = ''\n            let toBeDeleted = e.target.getAttribute('data-analysisid')\n            let deleteAnalysis = e.target.parentNode.parentNode.remove()\n            prices = document.querySelector('.price')\n            //update total price by substracting from total\n            totalPrice -= parseInt(e.target.parentNode.previousElementSibling.innerText)\n            totalPriceSpan.innerText = `Ukupno: ${totalPrice} din.`\n            let nameIndex = itemsArray.findIndex((item) => {\n                return item.id === toBeDeleted\n              })\n            itemsArray.splice(nameIndex,1)\n            items = JSON.stringify(itemsArray)\n            localStorage.setItem('items', items)\n\n            schedule[0].total=totalPrice\n            schedule[1].analysis = itemsArray\n            schedule[2].labId = labId\n\n            // console.log('2' + scheduleString)\n\n            let numAnalysis = document.querySelector('.numAnalysis')\n            numAnalysis.textContent = `Broj odabranih analiza (${itemsArray.length})`\n            checkout.textContent = itemsArray.length\n            if(itemsArray.length == 0) {\n              resultSection.classList.add('d-none')\n              checkout.classList.add('d-none')\n            }\n          }\n        })\n      }\n\n      let scheduleBtn = document.getElementById('schedule')\n\n\n      // console.log('3'+ scheduleString)\n\n      scheduleBtn.addEventListener('click', ()=>{\n\n        schedule[3].date = (dateLab.value != \"\")? dateLab.value:datePatronaza.value\n        scheduleString = JSON.stringify(schedule)\n        fetch('/schedule/',{\n          method:\"post\",\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body:scheduleString\n        }).then(response => {\n          console.log(response)\n          window.location.href=\"/hvala\"\n        })\n\n      })\n\n    }\n\n\n\n\nif(urlArr[1] == 'profile' && !findUserByEmail) {\n\n  const visina = document.getElementById('visina')\n  const tezina = document.getElementById('tezina')\n  const bmi = document.getElementById('bmi')\n\n\n  visina.addEventListener('input', () => {\n    bmi.value = ((tezina.value)/((visina.value/100)*(visina.value/100))).toFixed(2)\n  })\n\n  tezina.addEventListener('input', () => {\n    bmi.value = ((tezina.value)/((visina.value/100)*(visina.value/100))).toFixed(2)\n  })\n\n  const searchUserEmail = document.getElementById('searchForUserEmail')\n    // if(searchUserEmail) {\n      // console.log(searchUserEmail)\n    // }\n} else {\n    // const labDashResults = document.getElementById('labDashboard')\n    const labDashTable = document.getElementById('labDashResults')\n    console.log(labDashTable)\n      findUserByEmail.addEventListener('input', () => {\n\n        let searchStr = findUserByEmail.value\n        fetch('/users/'+searchStr).then((data) => {\n          labDashTable.innerHTML = ''\n          data.json().then((result) => {\n            // console.log(result)\n            for(let i=0; i<result.length; i++){\n              labDashTable.innerHTML += `\n\n                <tbody>\n                  <tr class=\"dashboardResults\">\n                    <td>${result[i].user.username}</td>\n                    <td>${result[i].user.mobile}</td>\n                    <td align=\"align-left\">${result[i].user.email}</td>\n                    <td align=\"align-left\">${result[i].scheduledFor}</td>\n                    <td>${result[i].status}</td>\n                    <td title=\"broj potrebnih analiza\"><strong>${result[i].analiza.length}</strong></td>\n                    <td><img src=\"../images/${result[i].uzimanjeUzorka}.svg\" title=\"${result[i].uzimanjeUzorka}\" class=\"mb-1\"></td>\n                    <td>${result[i].total}<small>rsd</small></td>\n                    <td><button class=\"btn btn-outline-success\" data-toggle=\"modal\" data-target=\"#modal${result[i]._id}\">detalji</button></td>\n                  </tr>\n\n                  <!-- Modal -->\n                  <div class=\"modal fade\" id=\"modal${result[i]._id}\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n                    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                      <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                          <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Modal title</h5>\n                          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                          </button>\n                        </div>\n                        <div class=\"modal-body\">\n                          ${result[i].analiza}\n                        </div>\n                        <div class=\"modal-footer\">\n                          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n                          <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </tbody>\n\n              `\n            }\n          })\n        })\n      })\n\n  }\n\n/* ANALYSIS DETAILS PAGE ***************/\nif(urlArr[1] == 'results' && urlArr[2] == 'analysis' && urlArr[3] !== ''  ) {\n//scrollspy initialization for side navigation\n\n  $('body').scrollspy({\n    target: '#sideMenu',\n    offset: 30\n  })\n\n  //take input values from search box and filter reference\n  let innerPageSearch = document.getElementById('searchResultPage')\n  let analysisRadio = document.querySelectorAll('input[name=searchFilter]')\n\n  // search for analysis or lab\n  helper.searchLabAnalysis(innerPageSearch,analysisRadio)\n\n  //add analysis from analysis details page\n  let analysisBtn = document.querySelector('.addAnalysis')\n  /* take the analysisname from button and check if this analysis\n    is already added to basket */\n  let disableAddBtn = itemsArray.findIndex(item => {\n    return analysisBtn.getAttribute('data-analysisName') == item.name\n  })\n\n  /* if analysis is already in basket disable button for\n    adding analysis to basket*/\n  if(disableAddBtn !== -1) {\n    analysisBtn.innerHTML = '&#10004;'\n    analysisBtn.disabled = true\n    analysisBtn.classList.remove('addAnalysis')\n    analysisBtn.classList.add('deleteAnalysis')\n  }\n  helper.addAnalysis(itemsArray, analysisBtn, checkout)\n  helper.removeAnalysis(itemsArray, checkout)\n}\n\n/*********************** BACKEND ************************/\nif (location.match('addLab')) {\n\n// populating working days Tuesday-Friday based on values from Monday\n  let mondayOpens = document.querySelector('#mondayOpens')\n  let mondayCloses = document.querySelector('#mondayCloses')\n\n  let workingWeek = document.querySelectorAll('.__working-hours')\n\n  mondayCloses.addEventListener('blur', (e) => {\n    document.getElementById('saturdayOpens').focus()\n    for(i=0; i<workingWeek.length-4; i++)\n      if(i%2 == 0) {\n        workingWeek[i].value=mondayOpens.value\n      } else {\n        workingWeek[i].value=mondayCloses.value\n      }\n    })\n\n    // delete all working hours on click / set 24h to false\n    let deleteWH = document.querySelector('#deleteWH')\n    deleteWH.addEventListener('click', (e) => {\n      e.preventDefault()\n      for(i=0; i<workingWeek.length; i++) {\n        workingWeek[i].value=''\n      }\n      open24h.checked=false\n    })\n\n    // set working hours for the whole week to 00-24h\n    const open24h = document.querySelector('#open24h')\n      open24h.addEventListener('change', (e) => {\n        e.preventDefault()\n        if(open24h.checked == true) {\n          for(i=0; i<workingWeek.length; i++)\n            if(i%2 == 0) {\n              workingWeek[i].value='00:00'\n            } else {\n              workingWeek[i].value='24:00'\n            }\n        } else {\n          for(i=0; i<workingWeek.length; i++) {\n            workingWeek[i].value=''\n          }\n        }\n      })\n\n  // search id for the place and populate other address related\n  // fields on lab form\n\n  let searchPlaces = document.getElementById('searchPlaces')\n  let resultDiv = document.getElementById('result')\n  let city = document.getElementById('city')\n  let minicipality = document.getElementById('municipality')\n  let postalCode = document.getElementById('postalCode')\n\n  searchPlaces.addEventListener('input', (e) => {\n  if(searchPlaces.value.length>=3) {\n      fetch('/places/'+e.target.value).then((data) => {\n          data.json().then((result) => {\n            resultDiv.innerHTML=''\n            for(i=0; i<result.length; i++) {\n              let liItem = document.createElement('li')\n              liItem.className +=\"list-group-item\"\n              let link = document.createElement('a')\n              link.href=result[i]._id\n              link.setAttribute('data-municipality',result[i].municipality)\n              link.setAttribute('data-postalCode',result[i].postalCode)\n              // link.className += \"\"\n              liItem.appendChild(link)\n              let placeName = document.createTextNode(result[i].place)\n              link.appendChild(placeName)\n              resultDiv.appendChild(liItem)\n            }// for end\n\n            let resultList = document.querySelectorAll('#result li')\n            resultList.forEach((item) => {\n              item.addEventListener('click', (e) => {\n                e.preventDefault()\n                searchPlaces.value = e.srcElement.attributes.href.textContent\n                city.value = e.target.innerText\n                municipality.value=e.srcElement.getAttribute('data-municipality')\n                postalCode.value=e.srcElement.getAttribute('data-postalCode')\n                resultDiv.innerHTML=''\n              })\n            })\n\n          })// data json end\n      })\n    } else {\n      console.log('enter at least 3 letters')\n      resultDiv.innerHTML=''\n      city.value=''\n      municipality.value=''\n      postalCode.value=''\n    }\n  })\n\n  // add new phone field icon\n    let addNewPhone = document.querySelector('#addNewPhone')\n    let newPhone =  new NewElement('#contactData','div','form-group col-sm-4','small','form-text text-muted','new phone', 'form-control', 'e.g. 066/3423234', 'phone[]', '^0\\\\d\\\\d\\\\/\\\\d+')\n      newPhone.removeElement('.removeField')\n\n    // add additional phone input fields\n    addNewPhone.addEventListener('click', (e) => {\n      newPhone.addElement()\n      newPhone.removeElement('.removeField')\n    })\n\n  } // window location = /addLab\n\n\n  if (location.match('addAnalysis')) {\nconsole.log('da')\n    $('#summernote').summernote({\n\n          styleTags: [\n          'p','br',\n          {title: 'orderList', tag: 'ul', className: 'textList', value: 'ul'},\n          {title: 'leadText', tag: 'p', className: 'lead text-center', value:'p'},\n          {title:'reset', tag:'p',className:'', value:'p'}\n\n        ],\n          height: 220,\n          toolbar: [\n              ['view', ['codeview']],\n              ['img', ['picture']],\n              ['style', ['style', 'addclass', 'clear']],\n              ['fontstyle', ['bold', 'italic', 'ul', 'ol', 'link', 'paragraph']],\n              ['fontstyleextra', ['strikethrough', 'underline', 'hr', 'color', 'superscript', 'subscript']],\n          ]\n        });\n\n    let addNewAbbr = document.querySelector('#addNewAbbr')\n    let addNewAlt = document.querySelector('#addNewAlt')\n    let addNewConnectedAnalysis = document.querySelector('#addNewRelatedAnalysis')\n    let addNewConnectedDiseases = document.querySelector('#addNewDiseases')\n\n    let newAbbr = new NewElement('#abbrAltContainer', 'div', 'form-group col-sm-3', 'small', 'form-text text-muted', 'new abbr', 'form-control', 'new abbr', 'abbr[]', '.+')\n      newAbbr.removeElement('.removeField')\n\n      addNewAbbr.addEventListener('click', (e) => {\n        newAbbr.addElement()\n        newAbbr.removeElement('.removeField')\n      })\n\n    let newAlt = new NewElement('#abbrAltContainer', 'div', 'form-group col-sm-3', 'small', 'form-text text-muted', 'alternative name', 'form-control', 'new alt', 'alt[]', '.+')\n      newAlt.removeElement('.removeField')\n\n      addNewAlt.addEventListener('click', (e) => {\n        newAlt.addElement()\n        newAlt.removeElement('.removeField')\n      })\n\n    let groupId = document.getElementById('groupId')\n    let resultGroup = document.getElementById('resultGroup')\n    let groupName = document.getElementById('groupName')\n\n    groupId.addEventListener('input', (e) => {\n      if(groupId.value.length >= 1) {\n        fetch('/groups/'+e.target.value).then((data) => {\n          data.json().then((result) => {\n            resultGroup.innerHTML=''\n            for(i=0; i<result.length; i++) {\n              let liItem = document.createElement('li')\n              liItem.className +=\"list-group-item\"\n              let link = document.createElement('a')\n              link.href=result[i]._id\n              liItem.appendChild(link)\n              let groupName = document.createTextNode(result[i].name)\n              link.appendChild(groupName)\n              resultGroup.appendChild(liItem)\n            } // for end\n\n            let groupNamesList = document.querySelectorAll('#resultGroup li')\n              groupNamesList.forEach((itemGroup) => {\n                itemGroup.addEventListener('click', (e) => {\n                  e.preventDefault()\n                  groupId.value = e.srcElement.attributes.href.textContent\n                  groupName.value = e.target.innerText\n                  resultGroup.innerHTML=''\n                })// click end\n              })// foreach end\n          })// data.json end\n        })// fetch end\n      } else {\n        console.log('enter at least 3 letters')\n          resultGroup.innerHTML=''\n          groupName.value =''\n        }\n    })// groupid addEventListener\n\n// searching for connected analyses\n\n    let connectedAnalysis = document.getElementById('connectedAnalysis')\n    let getAnalyisisNameDiv = document.getElementById('resultConnectedAnalysis')\n    let relatedAnalysisParent = document.getElementById('relatedAnalysis')\n    let parentUl = document.querySelector('.connAnalysisUl')\n    // let parentUl\n\n    if(typeof(parentUl) !== 'undefined' && parentUl !== null) {\n      parentUl = document.querySelector('.connAnalysisUl')\n      // parentUl.setAttribute('id', 'tess')\n    }  else {\n      parentUl = document.createElement('ul')\n        parentUl.className += 'list-inline my-3 connAnalysisUl'\n        parentUl.setAttribute('id', 'tess')\n    }\n\n    let analysisSelected = []\n\n    // push items to array when form is reloaded\n    let liitems = document.querySelectorAll('.connAnalysisUl li')\n      liitems.forEach((item) => {\n        analysisSelected.push(item.innerText)\n      })\n\n    connectedAnalysis.addEventListener('input', (e) => {\n      if (connectedAnalysis.value.length > 2) {\n      fetch('/analysis/'+e.target.value).then((data) => {\n        data.json().then((result) => {\n          // console.log(result)\n          getAnalyisisNameDiv.innerHTML = ''\n          for(i=0; i<result.length; i++) {\n            let liItem = document.createElement('li')\n            liItem.className +=\"list-group-item\"\n            let link = document.createElement('a')\n            link.href=result[i]._id\n            liItem.appendChild(link)\n            let analysisName = document.createTextNode(result[i].analysisName)\n            link.appendChild(analysisName)\n            getAnalyisisNameDiv.appendChild(liItem)\n          } // for end\n        })// datajson end\n      })// fetch end\n    } else {\n        getAnalyisisNameDiv.innerHTML = ''\n      }\n    })// connectedAnalysis event listener end\n\n    let analysisNameList = document.getElementById('resultConnectedAnalysis')\n\n        analysisNameList.addEventListener('click', (e) => {\n          e.preventDefault()\n\n          if(!analysisSelected.includes(e.target.innerText)) {\n            analysisSelected.push(e.target.innerText)\n\n            // creating hidden input tag and grab analysis id\n            let connectedAnalysisID = document.createElement('input')\n            connectedAnalysisID.type = 'hidden'\n            connectedAnalysisID.name = 'connectedTo[]'\n            connectedAnalysisID.setAttribute('value', e.srcElement.attributes.href.textContent)\n\n            let connAnalysisName = document.createElement('input')\n            connAnalysisName.type = 'hidden'\n            connAnalysisName.name = 'connectedToName[]'\n            connAnalysisName.setAttribute('value', e.target.innerText)\n\n            let connectedAnalysisLi = document.createElement('li')\n            connectedAnalysisLi.className += 'list-inline-item __connectedAnalysis'\n            let connectedAnalysisInnerText = document.createTextNode(e.target.innerText)\n\n            connectedAnalysisLi.appendChild(connectedAnalysisInnerText)\n            connectedAnalysisLi.appendChild(connectedAnalysisID)\n            connectedAnalysisLi.appendChild(connAnalysisName)\n            parentUl.appendChild(connectedAnalysisLi)\n            relatedAnalysisParent.appendChild(parentUl)\n\n            connectedAnalysis.value=''\n            connectedAnalysis.focus()\n            getAnalyisisNameDiv.innerHTML = ''\n\n          } else {\n            console.log('analiza vec dodata')\n            connectedAnalysis.value=''\n            connectedAnalysis.focus()\n            getAnalyisisNameDiv.innerHTML = '' }\n\n        })// addevent listener end\n\n      // remove connected analyses\n      helper.removeElement(parentUl, analysisSelected)\n\n    // search for connected Diseases and adding them to the DOM\n    let connectedDiseases = document.getElementById('connectedDiseases')\n    let getDiseasesDiv = document.getElementById('resultConnectedDiseases')\n    let diseasesParent = document.getElementById('diseases')\n    let diseaseParentUl = document.querySelector('.connDiseaseUl')\n\n    if(typeof(diseaseParentUl) !== 'undefined' && diseaseParentUl !== null) {\n      diseaseParentUl = document.querySelector('.connDiseaseUl')\n    } else {\n      diseaseParentUl = document.createElement('ul')\n        diseaseParentUl.className += 'list-inline my-3 connDiseaseUl'\n    }\n\n    let diseaseSelected = []\n\n    // push items to array when form is reloaded\n    let diseaseItems = document.querySelectorAll('.connDiseaseUl li')\n      diseaseItems.forEach((item) => {\n        diseaseSelected.push(item.innerText)\n      })\n\n    connectedDiseases.addEventListener('input', (e) => {\n      if(connectedDiseases.value.length > 2) {\n        fetch('/diseases/'+e.target.value).then((data) =>{\n          data.json().then((result) => {\n            getDiseasesDiv.innerHTML = ''\n            for(i=0; i<result.length; i++) {\n              let liItem = document.createElement('li')\n              liItem.className += \"list-group-item\"\n              let link = document.createElement('a')\n              link.href=result[i]._id\n              liItem.appendChild(link)\n              let diseaseName = document.createTextNode(result[i].name)\n              link.appendChild(diseaseName)\n              getDiseasesDiv.appendChild(liItem)\n            } // for end\n          })// data.json end\n        })// fetch end\n      }// if end\n        else {\n          getDiseasesDiv.innerHTML = ''\n        }\n  })// connectedDisease addEventListener\n\n    // adding diseases to the page\n      let addDisease = document.getElementById('resultConnectedDiseases')\n\n      addDisease.addEventListener('click', (e) => {\n          e.preventDefault()\n\n        if(!diseaseSelected.includes(e.target.innerText)) {\n            diseaseSelected.push(e.target.innerText)\n            // creating hidden input tag and grab analysis id\n            let diseaseID = document.createElement('input')\n            diseaseID.type = 'hidden'\n            diseaseID.name = 'diseasesId[]'\n            diseaseID.setAttribute('value', e.srcElement.attributes.href.textContent)\n\n            let diseaseName = document.createElement('input')\n            diseaseName.type = 'hidden'\n            diseaseName.name = 'diseaseName[]'\n            diseaseName.setAttribute('value', e.target.innerText)\n\n            let diseaseLi = document.createElement('li')\n            diseaseLi.className += 'list-inline-item __connectedAnalysis'\n            let diseaseInnerText = document.createTextNode(e.target.innerText)\n            diseaseLi.appendChild(diseaseInnerText)\n            diseaseLi.appendChild(diseaseID)\n            diseaseLi.appendChild(diseaseName)\n            diseaseParentUl.appendChild(diseaseLi)\n            diseasesParent.appendChild(diseaseParentUl)\n            // clear the input\n            connectedDiseases.value = ''\n            connectedDiseases.focus()\n            getDiseasesDiv.innerHTML = ''\n          }\n          else {\n            console.log('analiza vec dodata')\n            connectedDiseases.value = ''\n            connectedDiseases.focus()\n            getDiseasesDiv.innerHTML = ''\n          }\n      })// addDisease end addEventListener\n\n        // remove diseases\n        helper.removeElement(diseaseParentUl,diseaseSelected)\n\n\n    let searchReference = document.getElementById('searchReference')\n    let referenceList = document.getElementById('referenceList')\n    let referenceParentDiv = document.getElementById('references')\n    let referenceUl = document.querySelector('.referenceUl')\n\n    if(typeof(referenceUl) !== 'undefined' && referenceUl !== null) {\n      referenceUl = document.querySelector('.referenceUl')\n    } else {\n      referenceUl = document.createElement('ol')\n        referenceUl.className += 'referenceUl'\n    }\n\n    let selectedReferences = []\n    // push items to array when form is reloaded\n    let referenceItems = document.querySelectorAll('.referenceUl li')\n      referenceItems.forEach((item) => {\n        selectedReferences.push(item.innerText)\n      })\n\n    searchReference.addEventListener('input', (e) => {\n      if(searchReference.value.length > 2) {\n        fetch('/reference/'+e.target.value).then((data) => {\n          data.json().then((result) => {\n            referenceList.innerHTML = ''\n            for(i=0; i<result.length; i++) {\n              let liItem = document.createElement('li')\n              liItem.className += \"list-group-item \"\n              let link = document.createElement('a')\n              link.href=result[i]._id\n              liItem.appendChild(link)\n              let referenceName = document.createTextNode(result[i].referenceTitle)\n              link.appendChild(referenceName)\n              referenceList.appendChild(liItem)\n            }// for end\n          })// data json end\n        })// fetch end\n      } else {\n        referenceList.innerHTML = ''\n      }\n    })\n\n  let addReference = document.getElementById('referenceList')\n\n  addReference.addEventListener('click', (e) => {\n        e.preventDefault()\n\n    if(!selectedReferences.includes(e.target.innerText)) {\n        selectedReferences.push(e.target.innerText)\n        // creating hidden input tag and grab analysis id\n        let referenceID = document.createElement('input')\n        referenceID.type = 'hidden'\n        referenceID.name = 'references[]'\n        referenceID.setAttribute('value', e.srcElement.attributes.href.textContent)\n\n        let referenceName = document.createElement('input')\n        referenceName.type = 'hidden'\n        referenceName.name = 'referenceName[]'\n        referenceName.setAttribute('value', e.target.innerText)\n\n        // TODO: move remove functionality to functon\n        let removeButton = document.createElement('small')\n        removeButton.className += 'ml-2 float-right text-danger removeConnectedAnalysis'\n        // let removeText = document.createTextNode('x')\n        // removeButton.appendChild(removeText)\n        // remove section end\n        let referenceLi = document.createElement('li')\n        referenceLi.className = 'my-2'\n        // referenceP.className += 'd-block'\n        let referenceTitle = document.createTextNode(e.target.innerText)\n        referenceLi.appendChild(referenceTitle)\n        // referenceLi.appendChild(removeButton)\n        referenceLi.appendChild(referenceID)\n        referenceLi.appendChild(referenceName)\n        referenceUl.appendChild(referenceLi)\n        referenceParentDiv.appendChild(referenceUl)\n\n        searchReference.value=''\n        searchReference.focus()\n        referenceList.innerHTML = ''\n    } else {\n      searchReference.value=''\n      searchReference.focus()\n      referenceList.innerHTML = ''\n    }\n  })// addreference addEventListener\n\n  // remove reference after it is added to the page\n  helper.removeElement(referenceUl,selectedReferences)\n\n  let searchEditor = document.getElementById('searchEditors')\n  let editorsList = document.getElementById('editorsList')\n  let editorParentDiv = document.getElementById('editor')\n  let editorDiv\n\n  if(typeof(editorDiv) !== 'undefined' && editorDiv !== null) {\n    // select editor div after page refresh\n    editorDiv = document.querySelector('.__editorsList')\n  } else {\n    editorDiv = document.createElement('div')\n    editorDiv.className += '__editorsList'\n  }\n\n  let selectedEditor = []\n  //take editor id after page refresh\n  let editors = document.querySelector('.__editorsList input[name=writtenBy]')\n    if(editors) {\n      selectedEditor.push(editors.value)\n      // console.log(selectedEditor)\n    }\n\n    searchEditor.addEventListener('input', (e) => {\n      // if(document.querySelector('.__editorsList')) {\n      //   alert('vec je dodat urednik za ovu analizu, ukoliko hoces da ga izmenis prvo ukloni postojeceg')\n      // } else {\n        if(searchEditor.value.length > 2) {\n          fetch('/editors/'+e.target.value).then((data) => {\n            data.json().then((result) => {\n              editorsList.innerHTML = ''\n              for(i=0; i<result.length; i++) {\n                let liItem = document.createElement('li')\n                liItem.className += \"list-group-item \"\n                let link = document.createElement('a')\n                link.href=result[i]._id\n                link.setAttribute('data-editorImage',result[i].picture)\n                liItem.appendChild(link)\n                let editorName = document.createTextNode(`${result[i].firstName} ${result[i].lastName}`)\n                link.appendChild(editorName)\n                editorsList.appendChild(liItem)\n              }// for end\n            })// data json end\n          })// fetch end\n        } else {\n          editorsList.innerHTML = ''\n          }\n      // } // else end\n    })// search editor addeventlistener end\n\n  let addEditor = document.getElementById('editorsList')\n\n      addEditor.addEventListener('click', (e) => {\n        e.preventDefault()\n        // if(selectedEditor.length == 0) {\n        //   selectedEditor.push(e.srcElement.attributes.href.textContent)\n\n        editorDiv.setAttribute('id', 'ddd')\n        let editorID = document.createElement('input')\n        editorID.type = 'hidden'\n        editorID.name = 'writtenBy'\n        editorID.setAttribute('value', e.srcElement.attributes.href.textContent)\n\n        // set hidden input for keeping editor's name after page refresh\n        let inputEditorName = document.createElement('input')\n          inputEditorName.type = 'hidden'\n          inputEditorName.name = 'editorHiddenName'\n          inputEditorName.setAttribute('value', e.target.innerText)\n\n        //set hidden input for keeping editor's picture\n        let inputEditorImage = document.createElement('input')\n          inputEditorImage.type = 'hidden'\n          inputEditorImage.name = 'editorHiddenImage'\n          inputEditorImage.setAttribute('value', e.srcElement.getAttribute('data-editorImage'))\n\n        let editorh4 = document.createElement('h4')\n          editorh4.className = 'ml-4 mt-3 float-right'\n        let editorImage = document.createElement('img')\n          editorImage.className = 'rounded ml-2 mt-3 __editorImage'\n          editorImage.setAttribute('src','/images/editors/'+e.srcElement.getAttribute('data-editorImage'))\n\n        let editorDisplayName = document.createTextNode(e.target.innerText)\n        editorh4.appendChild(editorDisplayName)\n        editorDiv.appendChild(editorImage)\n        editorDiv.appendChild(editorh4)\n        editorDiv.appendChild(inputEditorName)\n        editorDiv.appendChild(inputEditorImage)\n        editorDiv.appendChild(editorID)\n        editorParentDiv.appendChild(editorDiv)\n\n        searchEditor.value=''\n        editorsList.innerHTML = ''\n        let removeEditor = document.querySelector('.__editorsList')\n            removeEditor.addEventListener('click', (e) => {\n              while(removeEditor.firstChild) {\n                removeEditor.firstChild.remove()\n              }\n            })\n      })// item.addeventListener end\n\n      // helper.removeElement(editorDiv,selectedEditor)\n\n      let removeEditor = document.querySelector('.__editorsList')\n      if(removeEditor) {\n          removeEditor.addEventListener('click', (e) => {\n            while(removeEditor.firstChild) {\n              removeEditor.firstChild.remove()\n            }\n            removeEditor.remove()\n          })\n      }\n\n  }// location match end addAnalysis\n\n  if (location.match('addPrice')) {\n    let newPriceList =  new PriceList.createPrice()\n  }\n\n//delete analysis\n  if(location.match('allAnalysis')) {\n    helper.deleteDocument('.deleteDocument','analiza ce biti obrisana?','/allAnalysis/','/allAnalysis','doslo je do greske')\n    }\n\n//delete lab\n  if(location.match('allLabs')) {\n    helper.deleteDocument('.deleteDocument','laboratorija ce biti obrisana','/allLabs/','/allLabs','doslo je do greske')\n  }\n\n//delete group\n  if(location.match('allGroupsList')) {\n    helper.deleteDocument('.deleteDocument', 'grupa ce biti obrisana', '/allGroupsList/', '/allGroupsList', 'doslo je do greske prilikom brisanja grupe')\n  }\n//delete disease\n  if(location.match('allDiseases')) {\n    helper.deleteDocument('.deleteDocument', 'oboljenje ce biti obrisano', '/allDiseases/', '/allDiseases', 'doslo je do greske prilikom brisanja oboljenja')\n  }\n//delete editor\n  if(location.match('allEditors')) {\n    helper.deleteDocument('.deleteDocument', 'urednik ce biti obrisan', '/allEditors/', '/allEditors', 'doslo je do greske prilikom brisanja urednika')\n  }\n//delete reference\n  if(location.match('allReferences')) {\n    helper.deleteDocument('.deleteDocument', 'referenca ce biti obrisana', '/allReferences/', '/allReferences', 'doslo je do greske prilikom uklanjanja reference')\n  }\n//delete faq\n  if(location.match('allFaqs')) {\n    helper.deleteDocument('.deleteDocument', 'Pitanje ce biti obrisano', '/allFaqs/', '/allFaqs', 'doslo je do greske prilikom uklanjanja pitanja')\n  }\n//delete priceList\n  if(location.match('allPrices')) {\n    helper.deleteDocument('.deleteDocument', 'Cenovnik ce biti obrisan', '/allPrices/', '/allPrices', 'doslo je do greske prilikom brisanja cenovnika')\n  }\n\n}// window onload end\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}